"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[1477],{10:n=>{n.exports=JSON.parse('{"blogPosts":[{"id":"/upgrade-webpack5","metadata":{"permalink":"/blog/upgrade-webpack5","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/upgrade-webpack5.md","source":"@site/blog/upgrade-webpack5.md","title":"webpack@5 \u5347\u7ea7\u5b9e\u8df5","description":"\u672c\u6587\u8bb0\u5f55\u4e86 webpack@4 \u5347\u7ea7 webpack@5 \u6b65\u9aa4\u548c\u6ce8\u610f\u4e8b\u9879\u3002","date":"2022-12-11T17:36:43.000Z","formattedDate":"2022\u5e7412\u670811\u65e5","tags":[{"label":"webpack","permalink":"/blog/tags/webpack"}],"readingTime":3.08,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"webpack@5 \u5347\u7ea7\u5b9e\u8df5","comments":true,"date":"2022-12-11T17:36:43.000Z","updated":"2022-12-11T17:36:43.000Z","tags":["webpack"],"categories":["webpack"]},"nextItem":{"title":"Mac \u7cbe\u54c1\u5c4f\u4fdd\u63a8\u8350","permalink":"/blog/pictures"}},"content":"\u672c\u6587\u8bb0\u5f55\u4e86 `webpack@4` \u5347\u7ea7 `webpack@5` \u6b65\u9aa4\u548c\u6ce8\u610f\u4e8b\u9879\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n> [webpack \u5b98\u65b9\u8fc1\u79fb\u6307\u5357](https://webpack.js.org/migrate/5/)\\n\\n## \u5347\u7ea7 `dependencies` & `devDependencies`\\n1. webpack\\n+ `\\"webpack\\": \\"^4.46.0\\"` -> `^5.75.0`\\n+ `\\"webpack-dev-server\\": \\"^3.11.2\\"` -> `^4.11.1`\\n+ `\\"webpack-merge\\": \\"^4.2.1\\"` -> `^5.8.0`\\n+ `\\"webpack-bundle-analyzer\\": \\"^3.3.2\\"` -> `^4.7.0`\\n\\n2. loaders\\n+ remove `url-loader`, `file-loader`, `raw-loader`, \u4f7f\u7528 `webpack` \u81ea\u5e26 Asset Modules \u66ff\u4ee3;\\n+ remove `cache-loader`\\n+ `\\"css-loader\\": \\"^5.2.7\\"` -> `^6.7.2`\\n+ `\\"less-loader\\": \\"^7.3.0\\"` -> `^11.1.0`\\n+ `\\"postcss-loader\\": \\"^4.3.0\\"` -> `^7.0.2`\\n+ `\\"sass-loader\\": \\"^10.1.0\\"` -> `^13.2.0`\\n+ `\\"style-loader\\": \\"^2.0.0\\"` -> `^3.3.1`\\n+ `\\"vue-loader\\": \\"^15.9.6\\"` -> `^15.9.8`\\n\\n3. plugins\\n+ `\\"html-webpack-plugin\\": \\"^4.5.2\\"` -> `^5.5.0`\\n+ `\\"mini-css-extract-plugin\\": \\"^1.6.0\\"` -> `^2.7.2`\\n+ `\\"terser-webpack-plugin\\": \\"^2.2.1\\"` -> `^5.3.6`, remove `terser`\\n+ add `\\"css-minimizer-webpack-plugin\\": \\"^3.0.2\\"`\\n+ remove `optimize-css-assets-webpack-plugin`\\n+ remove `script-ext-html-webpack-plugin`\\n\\n## \u66f4\u65b0 webpack config\\n1. \u4f9d\u636e[\u6307\u5357](https://webpack.js.org/migrate/5/#update-outdated-options)\uff0c\u66f4\u65b0\u914d\u7f6e\\n+ add `optimization.moduleIds: \'deterministic\'`\\n+ add `cache.type: \'filesystem\'`\\n+ remove `new webpack.HashedModuleIdsPlugin()`\\n\\n2. `webpack-merge`\\n\u4fee\u6539 require \u53d6\u503c `const merge = require(\'webpack-merge\')` \u4e3a `const { merge } = require(\'webpack-merge\')`\\n\\n3. dev server\\n+ `webpack-dev-server` API \u6709\u6539\u52a8\uff0c\u9700\u8981\u4fee\u6539\u4f20\u53c2\u987a\u5e8f\\n```js\\nconst WebpackDevServer = require(\'webpack-dev-server\')\\n\\n// const server = new WebpackDevServer(compiler, devServerOptions)\\n// server.listen(PORT)\\n\\nconst server = new WebpackDevServer(devServerOptions, compiler)\\nserver.start(PORT)\\n```\\n\\n+ devServer options\\n\u5220\u9664 `contentBase`, `stats`\uff0c\u5982\u4e0b:\\n```js\\n{\\n\\t// ...\\n\\tstatic: [\'public\'],\\n\\thost: \'0.0.0.0\',\\n  client: {\\n    overlay: true\\n  },\\n  open: true,\\n  // ...\\n}\\n```\\n\\n+ devtool\\n`devtool: \'cheap-module-eval-source-map\'` -> `eval-cheap-source-map`\\n\\n4. \u5220\u9664\u81ea\u5b9a\u4e49 open browser / ip \u65b9\u6cd5\u548c\u8c03\u7528\\n\\n5. `optimization`\\n```js\\noptimization: {\\n runtimeChunk: true,\\n removeAvailableModules: false,\\n removeEmptyChunks: false,\\n splitChunks: false\\n}\\n```\\n\\n6. \u5220\u9664 `script-ext-html-webpack-plugin`\\n\u7531\u4e8e `script-ext-html-webpack-plugin` \u4e0d\u652f\u6301 `webpack@5`\uff0c \u539f\u672c\u60f3\u7528 `@vue/preload-webpack-plugin` \u4ee3\u66ff `script-ext-html-webpack-plugin`, \u7ed3\u679c\u53d1\u73b0 `@vue/preload-webpack-plugin` \u914d\u7f6e\u590d\u6742\uff0c\u65e0\u6cd5\u4ec5 preload js \u7c7b\u578b\u6587\u4ef6\uff0c\u6240\u4ee5\u6682\u65f6\u820d\u5f03\u4e86\u3002\\n\\n7. `vue-loader`\\n\u5220\u9664 `cacheDirectory`, `cacheIdentifier`\\n\\n8. \u56fe\u7247\u3001\u97f3\u9891\u3001\u5b57\u4f53\u7b49\u8d44\u6e90\\n```js\\n{\\n\\ttest: /\\\\.(jpe?g|png|gif|svg)$/i,\\n\\ttype: \'asset\',\\n \\tparser: {\\n   \\tdataUrlCondition: {\\n     \\tmaxSize: 1024\\n   \\t}\\n \\t},\\n \\tgenerator: {\\n   \\tfilename: isProd ? \'images/[hash:8][ext][query]\' : \'images/[name].[hash:8][ext]\'\\n \\t}\\n}, {\\n\\ttest: /\\\\.(mp3|mp4|ogg|webm|ttf)$/i,\\n\\ttype: \'asset/resource\',\\n \\tgenerator: {\\n   \\tfilename: isProd ? \'assets/[hash:8][ext][query]\' : \'assets/[name].[hash:8][ext]\'\\n  }\\n}\\n```\\n\\n9. `svg-sprite-loader`\\n\u539f\u672c\u9879\u76ee\u4e2d\u4f7f\u7528\u7684\u662f `extract` \u6a21\u5f0f\uff0c\u6253\u5305\u6210\u72ec\u7acb svg \u6587\u4ef6\uff0c\u901a\u8fc7\u63a5\u53e3\u8bf7\u6c42\u540e\u63d2\u5165 DOM\u3002\u73b0\u5728\u7531\u4e8e webpack@5 `cache.type: \'filesystem\'`, \u5bfc\u81f4\u5f00\u53d1\u6a21\u5f0f\u4e0b\u975e\u9996\u6b21\u6253\u5305\u65e0\u6cd5\u83b7\u53d6\u5230 svg, \u6240\u4ee5\u8fd9\u91cc\u53d6\u6d88\u4e86 `extract` \u6a21\u5f0f\u3002\\n```js\\n{\\n\\ttest: /\\\\.svg$/,\\n\\tloader: \'svg-sprite-loader\'\\n}\\n```\\n\\n\\t\u6ce8\u610f\uff0c\u9700\u8981\u5220\u9664 `new SpriteLoaderPlugin()`\\n\\n10. `css-minimizer-webpack-plugin`\\n\u4f7f\u7528 `css-minimizer-webpack-plugin` \u66ff\u4ee3 `optimize-css-assets-webpack-plugin`\\n\\n\\n## \u5347\u7ea7 `nodejs >= 14.15.0`\\n1. \u6709\u90e8\u5206 `dependencies` \u6700\u5c0f nodejs \u7248\u672c\u4e3a `14.15.0`, \u53ef\u914c\u60c5\u5347\u7ea7\u66f4\u9ad8\u7248\u672c\u3002\\n2. \u5982\u679c `--max_old_space_size=4096` \u5206\u914d\u5185\u5b58\u8d85\u51fa\u4e86\u7cfb\u7edf\u4e0a\u9650\uff0c\u53ef\u80fd\u5bfc\u81f4\u6253\u5305\u5361\u4f4f\uff0c\u53ef\u5220\u9664\u8be5\u914d\u7f6e\u3002\\n\\n## \u9002\u914d\u4e1a\u52a1\u4ee3\u7801\\n1. `json` \u6587\u4ef6 import \u4e0d\u80fd\u76f4\u63a5\u5c55\u5f00\u5bf9\u8c61\u5c5e\u6027;\\n2. \u73af\u5883\u53d8\u91cf\u4e0d\u80fd\u662f undefined\uff0c\u5373\u4f7f\u662f\u7a7a\u503c\uff0c\u4e5f\u9700\u8981\u4e3b\u52a8\u58f0\u660e;\\n3. \u6839\u636e\u63d0\u793a\u589e\u52a0 `resolve.fallback`\uff0c\u5982 `querystring: require.resolve(\'querystring-es3\')`;\\n4. \u81ea\u5b9a\u4e49\u7684\u9884\u6e32\u67d3\u63d2\u4ef6\u65e0\u6cd5\u76f4\u63a5\u4fee\u6539 `compilation.assets`\uff0c\u8fd9\u91cc\u628a\u63d2\u4ef6\u6539\u5199\u4e3a nodejs \u811a\u672c\u6765\u6267\u884c\u9884\u6e32\u67d3\u903b\u8f91\u3002\\n\\n\u4ee5\u4e0a\u3002"},{"id":"/pictures","metadata":{"permalink":"/blog/pictures","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/pictures.md","source":"@site/blog/pictures.md","title":"Mac \u7cbe\u54c1\u5c4f\u4fdd\u63a8\u8350","description":"\u63a8\u8350 2 \u6b3e\u7cbe\u7f8e\u7684 Mac \u5c4f\u5e55\u4fdd\u62a4\u7a0b\u5e8f\u3002","date":"2020-06-12T17:55:26.000Z","formattedDate":"2020\u5e746\u670812\u65e5","tags":[{"label":"tool","permalink":"/blog/tags/tool"}],"readingTime":0.575,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Mac \u7cbe\u54c1\u5c4f\u4fdd\u63a8\u8350","comments":true,"date":"2020-06-12T17:55:26.000Z","updated":"2020-06-12T17:55:26.000Z","tags":["tool"],"categories":["mac"]},"prevItem":{"title":"webpack@5 \u5347\u7ea7\u5b9e\u8df5","permalink":"/blog/upgrade-webpack5"},"nextItem":{"title":"HTML \u5e94\u7528 a \u6807\u7b7e\u62e8\u6253\u7535\u8bdd\u5b57\u7b26\u95ee\u9898","permalink":"/blog/web-tel"}},"content":"\u63a8\u8350 2 \u6b3e\u7cbe\u7f8e\u7684 Mac \u5c4f\u5e55\u4fdd\u62a4\u7a0b\u5e8f\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## Brooklyn\\n\u8fd9\u662f\u4e00\u6b3e\u5f00\u6e90\u5c4f\u4fdd\uff0c\u9879\u76ee\u6258\u7ba1\u5728 [Github \u5b98\u65b9\u4ed3\u5e93](https://github.com/pedrommcarrasco/Brooklyn) \u4e0a\u3002\u6548\u679c\u5982\u4e0b\uff1a\\n\\n![Brooklyn](/images/showcase.gif)\\n\\n\u5b89\u88c5\u65b9\u5f0f\u53c2\u8003\u5b98\u65b9\u6587\u6863\u3002\u5982\u4f7f\u7528 [`Homebrew`](https://brew.sh/) \u5b89\u88c5\u5982\u4e0b\uff1a\\n\\n```zsh\\nbrew cask install brooklyn\\n```\\n\\n## Fliqlo\\n\u524d\u5f80 [fliqlo.com](https://fliqlo.com/#/screensaver) \u4e0b\u8f7d `dmg` \u5305\u5b89\u88c5\u5373\u53ef\u3002\\n\\n![Fliqlo](/images/fliqlo.png)\\n\\n*\u6ce8\uff1a\u4e5f\u652f\u6301 Windows.*\\n\\n## \u8bbe\u7f6e\\n\u6253\u5f00 `\u7cfb\u7edf\u504f\u597d\u8bbe\u7f6e` -> `\u684c\u9762\u4e0e\u5c4f\u5e55\u4fdd\u62a4\u7a0b\u5e8f` -> \u9009\u62e9\u559c\u6b22\u7684\u5c4f\u4fdd\u5373\u53ef\u3002"},{"id":"/web-tel","metadata":{"permalink":"/blog/web-tel","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/web-tel.md","source":"@site/blog/web-tel.md","title":"HTML \u5e94\u7528 a \u6807\u7b7e\u62e8\u6253\u7535\u8bdd\u5b57\u7b26\u95ee\u9898","description":"\u5728 HTML \u4e2d\u6211\u4eec\u4f7f\u7528 a \u6807\u7b7e\u6765\u62e8\u6253\u7535\u8bdd\u3002\u6709\u4e00\u4e9b\u7279\u6b8a\u5b57\u7b26\u53ef\u80fd\u65e0\u6cd5\u5e26\u5165\u7cfb\u7edf\u62e8\u53f7\u952e\u76d8\uff0c\u5982 #\u3002","date":"2020-03-05T21:20:33.000Z","formattedDate":"2020\u5e743\u67085\u65e5","tags":[{"label":"web","permalink":"/blog/tags/web"}],"readingTime":0.43,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"HTML \u5e94\u7528 a \u6807\u7b7e\u62e8\u6253\u7535\u8bdd\u5b57\u7b26\u95ee\u9898","comments":true,"date":"2020-03-05T21:20:33.000Z","updated":"2020-03-05T21:20:33.000Z","tags":["web"],"categories":["web"]},"prevItem":{"title":"Mac \u7cbe\u54c1\u5c4f\u4fdd\u63a8\u8350","permalink":"/blog/pictures"},"nextItem":{"title":"\u3010\u5b9e\u7528\u63a8\u8350\u3011npm script \u4fbf\u6377\u6267\u884c\u5de5\u5177 - ntl","permalink":"/blog/package-ntl"}},"content":"\u5728 HTML \u4e2d\u6211\u4eec\u4f7f\u7528 `a` \u6807\u7b7e\u6765\u62e8\u6253\u7535\u8bdd\u3002\u6709\u4e00\u4e9b\u7279\u6b8a\u5b57\u7b26\u53ef\u80fd\u65e0\u6cd5\u5e26\u5165\u7cfb\u7edf\u62e8\u53f7\u952e\u76d8\uff0c\u5982 `#`\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n\u89e3\u51b3\u65b9\u6cd5\uff1a\u5bf9\u53f7\u7801\u8fdb\u884c\u7f16\u7801\uff0c\u5982\uff1a\\n\\n```html\\n<a href=\\"tel:123*312%23\\"> TEL: 123*312# </a>\\n```\\n\\n\u624b\u673a\u53f7\u4e2d\u5e26\u6709 `#`\uff0c\u7f16\u7801\u540e\u53d8\u6210\u4e86 `%23`\u3002\\n\u5728 js \u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 `encodeURIComponent` \u65b9\u6cd5\u5bf9\u5176\u8fdb\u884c\u7f16\u7801\u3002\\n\\n\u4ee5\u4e0a\u3002"},{"id":"/package-ntl","metadata":{"permalink":"/blog/package-ntl","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/package-ntl.md","source":"@site/blog/package-ntl.md","title":"\u3010\u5b9e\u7528\u63a8\u8350\u3011npm script \u4fbf\u6377\u6267\u884c\u5de5\u5177 - ntl","description":"\u5f53 package.json \u6587\u4ef6\u91cc\u5199\u4e86\u5f88\u591a scripts \u547d\u4ee4\uff0c\u4e00\u65f6\u60f3\u4e0d\u8d77\u6765\u6709\u54ea\u4e9b\u600e\u4e48\u529e\uff1f\u8fd9\u91cc\u63a8\u8350\u4e00\u4e2a npm package: ntl, \u4e0d\u7528\u6253\u5f00\u914d\u7f6e\u6587\u4ef6, \u76f4\u63a5\u5728\u547d\u4ee4\u884c\u4e2d\u5217\u51fa\u6240\u6709\u53ef\u6267\u884c\u547d\u4ee4\uff0c\u4e0a\u4e0b\u9009\u62e9\u786e\u8ba4\u5373\u53ef\u6267\u884c\uff0c\u975e\u5e38\u65b9\u4fbf\u3002","date":"2020-02-28T12:05:24.000Z","formattedDate":"2020\u5e742\u670828\u65e5","tags":[{"label":"npm","permalink":"/blog/tags/npm"}],"readingTime":0.67,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u3010\u5b9e\u7528\u63a8\u8350\u3011npm script \u4fbf\u6377\u6267\u884c\u5de5\u5177 - ntl","comments":true,"date":"2020-02-28T12:05:24.000Z","updated":"2020-02-28T12:05:24.000Z","tags":["npm"],"categories":null},"prevItem":{"title":"HTML \u5e94\u7528 a \u6807\u7b7e\u62e8\u6253\u7535\u8bdd\u5b57\u7b26\u95ee\u9898","permalink":"/blog/web-tel"},"nextItem":{"title":"\u4f7f\u7528 fetch \u65b9\u6cd5\u4e0b\u8f7d\u540e\u7aef\u6587\u4ef6","permalink":"/blog/fetch-download"}},"content":"\u5f53 `package.json` \u6587\u4ef6\u91cc\u5199\u4e86\u5f88\u591a `scripts` \u547d\u4ee4\uff0c\u4e00\u65f6\u60f3\u4e0d\u8d77\u6765\u6709\u54ea\u4e9b\u600e\u4e48\u529e\uff1f\u8fd9\u91cc\u63a8\u8350\u4e00\u4e2a npm package: `ntl`, \u4e0d\u7528\u6253\u5f00\u914d\u7f6e\u6587\u4ef6, \u76f4\u63a5\u5728\u547d\u4ee4\u884c\u4e2d\u5217\u51fa\u6240\u6709\u53ef\u6267\u884c\u547d\u4ee4\uff0c\u4e0a\u4e0b\u9009\u62e9\u786e\u8ba4\u5373\u53ef\u6267\u884c\uff0c\u975e\u5e38\u65b9\u4fbf\u3002\\n\\n![ntl](https://ruyadorno.github.io/svg-demos/ntl/examples/option-rerun.svg)\\n\\n\x3c!--truncate--\x3e\\n## \u5b89\u88c5\\n\\n```zsh\\nnpm i ntl -g\\n```\\n\\n## \u914d\u7f6e\\n\u6253\u5f00 `~/.bash_profile` \u65b0\u589e\u914d\u7f6e\u73af\u5883\u53d8\u91cf\uff1a\\n\\n```bash\\n# .bash_profile\\nexport NTL_RUNNER=yarn\\n```\\n\\n## \u4f7f\u7528\\n\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u6267\u884c `ntl` \u547d\u4ee4\u5373\u53ef\u3002\\n\\n```zsh\\nntl\\n```\\n\\n\u5176\u4ed6\u53c2\u6570\uff0c\u53ef\u67e5\u770b[\u5b98\u65b9\u6587\u6863](https://www.npmjs.com/package/ntl)"},{"id":"/fetch-download","metadata":{"permalink":"/blog/fetch-download","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/fetch-download.md","source":"@site/blog/fetch-download.md","title":"\u4f7f\u7528 fetch \u65b9\u6cd5\u4e0b\u8f7d\u540e\u7aef\u6587\u4ef6","description":"\u5728 web \u9875\u9762\u4e2d\u4f7f\u7528\u539f\u751f window.fetch \u4e0b\u8f7d\u540e\u7aef\u6587\u4ef6\u3002","date":"2020-02-12T15:17:34.000Z","formattedDate":"2020\u5e742\u670812\u65e5","tags":[{"label":"web","permalink":"/blog/tags/web"}],"readingTime":0.415,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u4f7f\u7528 fetch \u65b9\u6cd5\u4e0b\u8f7d\u540e\u7aef\u6587\u4ef6","comments":true,"date":"2020-02-12T15:17:34.000Z","updated":"2020-02-12T15:17:34.000Z","tags":["web"],"categories":null},"prevItem":{"title":"\u3010\u5b9e\u7528\u63a8\u8350\u3011npm script \u4fbf\u6377\u6267\u884c\u5de5\u5177 - ntl","permalink":"/blog/package-ntl"},"nextItem":{"title":"Webpack DllPlugin \u57fa\u672c\u5e94\u7528\u4e0e\u5b9e\u8df5","permalink":"/blog/webpack-dll"}},"content":"\u5728 web \u9875\u9762\u4e2d\u4f7f\u7528\u539f\u751f window.fetch \u4e0b\u8f7d\u540e\u7aef\u6587\u4ef6\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u8fc7\u7a0b\u5206\u6790\\n1. fetch url;\\n2. \u89e3\u6790 `blob` \u6570\u636e;\\n3. \u4ece `response header` \u4e2d\u89e3\u6790\u6587\u4ef6\u540d;\\n4. \u52a8\u6001\u521b\u5efa `a` \u6807\u7b7e\uff0c\u5229\u7528 `download` \u8fdb\u884c\u4e0b\u8f7d;\\n5. \u5c06 `blob` \u6570\u636e\u8f6c\u6210 data uri, \u8d4b\u503c\u7ed9 a href .\\n\\n\\n## \u6e90\u7801\\n[Gist Code](https://gist.github.com/p2yang/72f23f5bd808d424f0b18af34f3c95e1)\\n\x3c!-- download source code --\x3e\\n<script src=\\"https://gist.github.com/p2yang/72f23f5bd808d424f0b18af34f3c95e1.js\\"><\/script>"},{"id":"/webpack-dll","metadata":{"permalink":"/blog/webpack-dll","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/webpack-dll.md","source":"@site/blog/webpack-dll.md","title":"Webpack DllPlugin \u57fa\u672c\u5e94\u7528\u4e0e\u5b9e\u8df5","description":"Webpack \u5185\u7f6e\u63d2\u4ef6 DllPlugin \u53ef\u4ee5\u5c06\u4e00\u4e9b\u8f83\u957f\u65f6\u95f4\u5185\u3001\u7a33\u5b9a\u4e0d\u53d8\u7684\u5305\u6216\u7ec4\u4ef6\u62c6\u5206\u51fa\u6765\uff0c\u4ee5 script \u5916\u94fe\u7684\u5f62\u5f0f\u5f15\u5165\u9875\u9762\uff0c\u4ee5\u51cf\u5c11 webpack \u6253\u5305\u65f6\u95f4\uff0c\u957f\u671f\u7f13\u5b58\u3002\u672c\u6587\u8bb0\u5f55\u4e86 Webpack \u5185\u7f6e\u63d2\u4ef6 DllPlugin \u57fa\u672c\u5e94\u7528\u65b9\u6cd5\u3002","date":"2020-01-19T22:37:31.000Z","formattedDate":"2020\u5e741\u670819\u65e5","tags":[{"label":"webpack","permalink":"/blog/tags/webpack"}],"readingTime":2.115,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Webpack DllPlugin \u57fa\u672c\u5e94\u7528\u4e0e\u5b9e\u8df5","comments":true,"date":"2020-01-19T22:37:31.000Z","updated":"2020-01-19T22:37:31.000Z","tags":["webpack"],"categories":["webpack"]},"prevItem":{"title":"\u4f7f\u7528 fetch \u65b9\u6cd5\u4e0b\u8f7d\u540e\u7aef\u6587\u4ef6","permalink":"/blog/fetch-download"},"nextItem":{"title":"Google Tag Manager \u5b9e\u7528\u81ea\u5b9a\u4e49 Variable \u548c Trigger","permalink":"/blog/gtm-variables"}},"content":"`Webpack` \u5185\u7f6e\u63d2\u4ef6 `DllPlugin` \u53ef\u4ee5\u5c06\u4e00\u4e9b\u8f83\u957f\u65f6\u95f4\u5185\u3001\u7a33\u5b9a\u4e0d\u53d8\u7684\u5305\u6216\u7ec4\u4ef6\u62c6\u5206\u51fa\u6765\uff0c\u4ee5 `script` \u5916\u94fe\u7684\u5f62\u5f0f\u5f15\u5165\u9875\u9762\uff0c\u4ee5\u51cf\u5c11 `webpack` \u6253\u5305\u65f6\u95f4\uff0c\u957f\u671f\u7f13\u5b58\u3002\u672c\u6587\u8bb0\u5f55\u4e86 Webpack \u5185\u7f6e\u63d2\u4ef6 `DllPlugin` \u57fa\u672c\u5e94\u7528\u65b9\u6cd5\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n\u672c\u6587\u73af\u5883\u4ee5 `webpack@4.x` + `node@10.x` \u4e3a\u4e3b\uff0c\u5e94\u7528\u5206 3 \u6b65\uff1a\\n1. \u5355\u72ec\u6253\u5305 `dll` \u76f8\u5173\u6587\u4ef6\uff1b\\n2. \u5f15\u5165 `webpack` \u914d\u7f6e\uff1b\\n3. \u63d2\u5165\u5916\u94fe\uff1b\\n\\n## \u5355\u72ec\u6253\u5305 `dll` \u76f8\u5173\u6587\u4ef6\uff1b\\n\u65b0\u5efa `webpack` \u914d\u7f6e\u6587\u4ef6 `webpack.dll.js`\uff0c\u6dfb\u52a0 `dll` \u76f8\u5173\u6587\u4ef6\u6253\u5305\u914d\u7f6e\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```js\\n// webpack.dll.js\\nconst path = require(\'path\')\\nconst webpack = require(\'webpack\')\\n\\nmodule.exports = {\\n  mode: process.env.NODE_ENV === \'production\' ? \'production\' : \'development\',\\n  entry: {\\n    vendor: [\\n      \'vue\',\\n      \'vue-router\',\\n      \'vuex\'\\n    ]\\n  },\\n  output: {\\n    path: path.resolve(__dirname, \'static/lib\'),\\n    filename: \'[name].dll.js\'\\n  },\\n  plugins: [\\n    new webpack.DllPlugin({\\n      name: \'[name]_[hash]\',\\n      path: path.join(__dirname, \'.\', \'[name]_manifest.json\')\\n    })\\n  ]\\n}\\n\\n```\\n\\n\u7136\u540e\u5728 `package.json` scripts \u4e2d\u6dfb\u52a0\u547d\u4ee4:\\n```json\\n{\\n\\t\\"scripts\\": {\\n    \\"build:dll\\": \\"webpack --config dll/webpack.dll.js\\"\\n  }\\n}\\n```\\n\\n\u914d\u7f6e\u597d\u540e\uff0c\u6267\u884c\u547d\u4ee4\uff1a\\n\\n```zsh\\nnpm run build:dll\\n\\n# \u6216\u8005\\nyarn build:dll\\n```\\n\\n\u8fd9\u91cc\u4f1a\u5c06\u6211\u4eec\u9009\u53d6 vue \u4e09\u4ef6\u5957\u6253\u5305\u51fa\u6765(Github\u793a\u4f8b\u5730\u5740\u8bf7\u770b\u4e0b\u6587)\uff0c\u751f\u6210\u4ee5\u4e0b\u4e24\u4e2a\u6587\u4ef6\uff1a\\n\\n+ `vendor_manifest.json`: dll \u914d\u7f6e\u6587\u4ef6\uff0c\u9700\u8981\u5728 `webpack` \u4e3b\u914d\u7f6e\u6587\u4ef6\u4e2d\u5f15\u5165\uff1b\\n+ `vendor.dll.js`: \u76ee\u6807\u4f9d\u8d56\u6574\u5408\u6587\u4ef6\uff0c\u6700\u540e\u9700\u8981\u5916\u94fe\u3002\\n\\n\u4e0b\u9762\uff0c\u6765\u770b\u4e0b\u8fd9\u4e24\u4e2a\u6587\u4ef6\u7684\u4f7f\u7528\u5427\u3002\\n\\n## \u4f7f\u7528 `webpack.DllReferencePlugin` \u5f15\u5165 `webpack` \u4e3b\u914d\u7f6e\uff1b\\n\u5728 `webpack` \u4e3b\u914d\u7f6e\u6587\u4ef6\u4e2d\u5f15\u5165 `vendor_manifest.json`\uff1a\\n\\n```js\\n// webpack.config.js\\nconst webpack = require(\'webpack\')\\n\\nmodule.exports = {\\n\\t// ...\u6b64\u5904\u7701\u7565\u5176\u4ed6\u914d\u7f6e\\n  plugins: [\\n    new webpack.DllReferencePlugin({\\n      context: __dirname,\\n      manifest: require(\'./vendor_manifest.json\')\\n    })\\n  ]\\n}\\n\\n```\\n\\n## \u63d2\u5165\u5916\u94fe\uff1b\\n\u76f4\u63a5\u5728 html \u5165\u53e3\u6587\u4ef6\u4e2d\u5f15\u5165\u3002\\n\\n```html\\n<script src=\\"/static/lib/vendor.dll.js\\"><\/script>\\n```\\n\\n\u542f\u52a8\u672c\u5730\u670d\u52a1\u770b\u770b\u5427\u3002\\n\\n\u6ce8\uff1a\u53ef\u4f7f\u7528 [`anywhere`](https://www.npmjs.com/package/anywhere) \u6216\u8005 [`http-server`](https://www.npmjs.com/package/http-server) \u5feb\u901f\u542f\u52a8\u672c\u5730\u9759\u6001\u670d\u52a1\u5668\u3002\\n\\n## Github \u793a\u4f8b\\n[Github \u793a\u4f8b](https://github.com/p2yang/webpack-examples/tree/master/dll)\\n[\u4e2a\u4eba\u535a\u5ba2](http://blog.p2yang.com)"},{"id":"/gtm-variables","metadata":{"permalink":"/blog/gtm-variables","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/gtm-variables.md","source":"@site/blog/gtm-variables.md","title":"Google Tag Manager \u5b9e\u7528\u81ea\u5b9a\u4e49 Variable \u548c Trigger","description":"\u5355\u72ec\u4e3a\u6bcf\u4e2a\u57cb\u70b9\u5efa\u7acb\u4e00\u4e2a\u4e2a Tag \u548c Trigger, \u672a\u514d\u592a\u8fc7\u9ebb\u70e6\u3002\u8fd9\u91cc\u8bb0\u5f55\u51e0\u4e2a\u5b9e\u7528\u7684\u81ea\u5b9a\u4e49\u53d8\u91cf\uff0c\u4ee5\u63d0\u9ad8\u6548\u7387\u3002","date":"2020-01-16T22:19:47.000Z","formattedDate":"2020\u5e741\u670816\u65e5","tags":[{"label":"Google Tag Manager","permalink":"/blog/tags/google-tag-manager"}],"readingTime":2.405,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Google Tag Manager \u5b9e\u7528\u81ea\u5b9a\u4e49 Variable \u548c Trigger","comments":true,"date":"2020-01-16T22:19:47.000Z","updated":"2020-01-16T22:19:47.000Z","tags":["Google Tag Manager"],"categories":null},"prevItem":{"title":"Webpack DllPlugin \u57fa\u672c\u5e94\u7528\u4e0e\u5b9e\u8df5","permalink":"/blog/webpack-dll"},"nextItem":{"title":"Google Tag Manager \u57fa\u672c\u5e94\u7528\u4e0e\u5b9e\u8df5","permalink":"/blog/gtm-basic"}},"content":"\u5355\u72ec\u4e3a\u6bcf\u4e2a\u57cb\u70b9\u5efa\u7acb\u4e00\u4e2a\u4e2a Tag \u548c Trigger, \u672a\u514d\u592a\u8fc7\u9ebb\u70e6\u3002\u8fd9\u91cc\u8bb0\u5f55\u51e0\u4e2a\u5b9e\u7528\u7684\u81ea\u5b9a\u4e49\u53d8\u91cf\uff0c\u4ee5\u63d0\u9ad8\u6548\u7387\u3002\\n\\n\x3c!--truncate--\x3e\\nGoogle Tag Manager \u652f\u6301\u591a\u79cd\u7c7b\u578b\u7684\u81ea\u5b9a\u4e49\u53d8\u91cf\uff0c\u524d\u7aef\u540c\u5b66\u53ef\u81ea\u884c\u9009\u62e9\u4f7f\u7528\u54ea\u4e9b\u3002\\n\\n## \u6839\u636e CSS Selector \u83b7\u53d6\u76ee\u6807\u5143\u7d20\\n\u8bbe\u7f6e\u53d8\u91cf\u540d\u4e3a `Find Closest`, \u53d8\u91cf\u7c7b\u578b\u4e3a `Custom JavaScript`, \u811a\u672c\u5185\u5bb9\u5982\u4e0b\uff1a\\n\\n```js\\nfunction() {\\n  return function(target, selector) {\\n    while (!target.matches(selector) && !target.matches(\'body\')) {\\n      target = target.parentElement;\\n    }\\n    return target.matches(selector) ? target : undefined;\\n  }\\n}\\n```\\n\\n![GTM Variable](/images/gtm/gtm2-variable.png)\\n\\n\u4e0b\u9762\u4f1a\u6709\u5177\u4f53\u5e94\u7528\u3002\\n\\n## \u81ea\u5b9a\u4e49 GA Event Category / Event Label \u53d8\u91cf\\n\u5728\u5173\u8054\u914d\u7f6e GA \u7684 Event track \u7c7b\u578b\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u53d8\u91cf\uff0c\u800c\u4e0d\u7528\u628a\u503c\u5199\u6b7b\u3002\u540c\u6837\u662f\u5148\u547d\u540d\u53d8\u91cf\uff0c\u8bbe\u7f6e\u53d8\u91cf\u7c7b\u578b\u4e3a `Custom JavaScript`\u3002\\n\u811a\u672c\u5185\u5bb9\u793a\u4f8b\u5982\u4e0b\uff1a\\n\\n```js\\nfunction() {\\n\\tvar el = {{Find Closest}}({{Click Element}}, \'[data-label]\');\\n\\treturn el ? el.dataset.label : \'\'\uff1b\\n}\\n```\\n\\n\u811a\u672c\u4e2d\u51fa\u73b0\u7684 `\\\\{\\\\{Find Closest\\\\}\\\\}` \u5c31\u662f\u4e0a\u9762\u81ea\u5b9a\u4e49\u7684\u53d8\u91cf `Find Closest`\uff0c\u53cc\u5927\u62ec\u53f7\u662f\u8c03\u7528\u53d6\u503c\u8bed\u6cd5\u3002\\n\u4e0d\u540c\u7684\u662f\uff0c`\\\\{\\\\{Click Element\\\\}\\\\}` \u662f Google Tag Manager \u5185\u7f6e\u53d8\u91cf\uff0c\u8868\u793a\u88ab\u70b9\u51fb\u7684 DOM \u5143\u7d20\u3002\\n`selector` \u53ef\u81ea\u884c\u6539\u5199\u3002\\n\\n\u8be5\u53d8\u91cf\u7684\u4f5c\u7528\u662f\u83b7\u53d6\u5230\u88ab\u70b9\u51fb\u76ee\u6807\u5143\u7d20\u4e0a\u7684 `data-label` \u503c\uff0c\u6ca1\u6709\u5219\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002\\n\\n## \u81ea\u5b9a\u4e49 Data Layer \u53d8\u91cf\\n\u5982\u679c\u9700\u8981\u624b\u52a8\u4e0a\u62a5\u7684\u8bdd\uff0c\u8fd9\u91cc\u53ef\u4ee5\u65b0\u5efa\u4e00\u4e2a `Data Layer Variable` \u7c7b\u578b\u7684\u53d8\u91cf\uff0c\u6240\u5b9a\u4e49\u7684\u503c\u53ef\u4ee5\u88ab `window.dataLayer` \u4e0a\u62a5\u3002\u793a\u4f8b\u5982\u4e0b\uff1a\\n\\n```js\\n// \u6ce8\u610f\uff1a\u6b64\u5904\u4ee3\u7801\u9700\u8981\u5728\u81ea\u5df1\u7684\u9875\u9762\u4e2d\u6dfb\u52a0\\nwindow.dataLayer.push({\\n\\t\'event\': \'track_custom_event\',\\n\\t\'xxx\': \'\u5f85\u4e0a\u62a5\u7684\u503c\'\\n})\\n```\\n\\n\u5176\u4e2d `xxx` \u5373\u4e3a\u6b64\u5904\u9700\u8981\u5b9a\u4e49\u7684 Data Layer Variable Name\u3002\\n\\n\u518d\u5efa\u7acb\u4e00\u4e2a\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u53d8\u91cf\uff0c\u53d8\u91cf\u7c7b\u578b\u9009 `Custom Event`\u3002\\n\\n\u7136\u540e\uff0c\u53ef\u4ee5\u5efa\u4e00\u4e2a `Custom Event` \u7c7b\u578b\u7684 Trigger \u6765\u54cd\u5e94\u624b\u52a8\u4e0a\u62a5\u4e8b\u4ef6\u3002\\n\u5176\u4e2d Event Name \u53ef\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5982\uff1a`[A-Z0-9_]+`\u3002\\n\u6ce8\u610f\uff0c\u9700\u8981\u52a0\u4e00\u6761\u5339\u914d\u89c4\u5219\uff0c\u7528\u6765\u6392\u9664\u5b98\u65b9\u7684\u4e8b\u4ef6\u7c7b\u578b - `gtm`\uff0c\u793a\u56fe\u5982\u4e0b\uff1a\\n\\n![GTM Trigger](/images/gtm/gtm2-trigger.png)"},{"id":"/gtm-basic","metadata":{"permalink":"/blog/gtm-basic","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/gtm-basic.md","source":"@site/blog/gtm-basic.md","title":"Google Tag Manager \u57fa\u672c\u5e94\u7528\u4e0e\u5b9e\u8df5","description":"\u5982\u679c\u60f3\u4e86\u89e3\u7f51\u7ad9\u7528\u6237\u7684\u4e92\u52a8\u60c5\u51b5\uff0c\u6211\u4eec\u8be5\u600e\u4e48\u7edf\u8ba1\uff1f","date":"2020-01-15T16:05:36.000Z","formattedDate":"2020\u5e741\u670815\u65e5","tags":[{"label":"Google Tag Manager","permalink":"/blog/tags/google-tag-manager"}],"readingTime":3.61,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Google Tag Manager \u57fa\u672c\u5e94\u7528\u4e0e\u5b9e\u8df5","comments":true,"date":"2020-01-15T16:05:36.000Z","updated":"2020-01-15T16:05:36.000Z","tags":["Google Tag Manager"],"categories":null},"prevItem":{"title":"Google Tag Manager \u5b9e\u7528\u81ea\u5b9a\u4e49 Variable \u548c Trigger","permalink":"/blog/gtm-variables"},"nextItem":{"title":"Webhooks - \u7f51\u7ad9\u81ea\u52a8\u5316\u90e8\u7f72\u5b9e\u8df5","permalink":"/blog/webhooks-deploy"}},"content":"\u5982\u679c\u60f3\u4e86\u89e3\u7f51\u7ad9\u7528\u6237\u7684\u4e92\u52a8\u60c5\u51b5\uff0c\u6211\u4eec\u8be5\u600e\u4e48\u7edf\u8ba1\uff1f\\n\\n\u56fd\u9645\u7ad9\u7684\u8bdd\u53ef\u4ee5\u9009\u7528 Google \u5bb6\u7684 `gtag.js`, `analytics.js`\uff0c\u6216\u8005 `gtm.js` \u8fdb\u884c\u5f00\u53d1\u3002\u524d\u4e24\u4e2a\u7684\u529f\u80fd\u548c\u4f7f\u7528\u65b9\u5f0f\u57fa\u672c\u4e00\u81f4\uff0c\u5177\u4f53\u5dee\u522b\u53ef\u53c2\u8003\u4e0b\u65b9\u7684\u5f00\u53d1\u6587\u6863\u3002`gtm.js` \u5c31\u662f\u672c\u6587\u8981\u8bf4\u7684 Google Tag Manager \u7684 js \u5e93\u3002\\n\\n\x3c!--truncate--\x3e\\nGoogle Tag Manager (\u4e0b\u6587\u7b80\u79f0 \\"GTM\\") \u529f\u80fd\u9f50\u5168\uff0c\u652f\u6301 Google \u4ee3\u7801\u548c\u7b2c\u4e09\u65b9\u4ee3\u7801\u3002\u76f8\u6bd4\u4e8e `gtag.js` \u548c `analytics.js` \u4ee3\u7801\u4fb5\u5165\u6027\u66f4\u5c0f\uff0c\u4e5f\u662f Google \u63a8\u8350\u4f7f\u7528\u7684\u5de5\u5177\u3002\\n\\n\u8bdd\u4e0d\u591a\u8bf4\uff0c\u5f00\u59cb\u6b63\u6587\u3002\\n\\n## 1. \u6ce8\u518c Container\\n\u586b\u597d\u5bb9\u5668\u540d\uff0c\u9009\u62e9\u5e94\u7528\u5e73\u53f0\u3002\u5bb9\u5668\u540d\u5efa\u8bae\u4ee5\u5e94\u7528\u5e73\u53f0\u6765\u547d\u540d\uff0c\u8fd9\u91cc\u6211\u4f7f\u7528\u7684\u662f\u57df\u540d `blog.p2yang.com`\u3002\\n\\n![GTM Container](/images/gtm/gtm-container.png)\\n\\n## 2. \u5b89\u88c5\\n\u6ce8\u518c\u5b8c\u6210\u540e\uff0c\u4f1a\u81ea\u52a8\u5206\u914d\u4e00\u4e2a `id`, \u5e76\u4e14\u5f39\u7a97\u63d0\u793a\u5b89\u88c5\u65b9\u6cd5\uff0c\u5c06\u4ee3\u7801\u7247\u6bb5\u63d2\u5165\u81ea\u5df1\u7684\u9875\u9762\u5373\u53ef\u3002\\n\u9875\u9762\u52a0\u8f7d\u65f6\uff0c\u4f1a\u5f02\u6b65\u8bf7\u6c42 `gtm.js` \u5e93\u548c\u76f8\u5173\u914d\u7f6e\uff0c\u5e76\u4e14\u63d0\u4f9b\u4e86\u6d4f\u89c8\u5668\u7981\u6b62 js \u811a\u672c\u7684\u5f25\u8865\u65b9\u6cd5\u3002\\n\\n\u8fd9\u91cc\u6458\u5f55\u4e0b\u4ee3\u7801\u6bb5\uff1a\\n\\n```html\\n\x3c!-- Google Tag Manager --\x3e\\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({\'gtm.start\':\\nnew Date().getTime(),event:\'gtm.js\'});var f=d.getElementsByTagName(s)[0],\\nj=d.createElement(s),dl=l!=\'dataLayer\'?\'&l=\'+l:\'\';j.async=true;j.src=\\n\'https://www.googletagmanager.com/gtm.js?id=\'+i+dl;f.parentNode.insertBefore(j,f);\\n})(window,document,\'script\',\'dataLayer\',\'GTM-NLZZ7XB\');<\/script>\\n\x3c!-- End Google Tag Manager --\x3e\\n```\\n\\n```html\\n\x3c!-- Google Tag Manager (noscript) --\x3e\\n<noscript><iframe src=\\"https://www.googletagmanager.com/ns.html?id=GTM-TFMV3HS\\"\\nheight=\\"0\\" width=\\"0\\" style=\\"display:none;visibility:hidden\\"></iframe></noscript>\\n\x3c!-- End Google Tag Manager (noscript) --\x3e\\n```\\n\\n\u4e0b\u4e00\u6b65\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u9488\u5bf9\u6027\u5730\u8fdb\u884c\u57cb\u70b9\u4e86\u3002\\n\\n## 3. \u5efa Tag\\n\u8fd9\u91cc\u662f\u6709 Google Analytics\uff08\u4ee5\u4e0b\u79f0 GA\uff09 \u5904\u7406\u548c\u5206\u6790\u7edf\u8ba1\u7684\u6570\u636e\uff0c\u9009\u62e9 `Google Analytics: Universal Analytics` \u65b0\u5efa Tag\uff0c\u5982\u4e0b\u56fe\uff1a\\n![GTM Tag](/images/gtm/gtm-tag.png)\\n\\n\\n### 3.1 \u5173\u8054 GA \u914d\u7f6e\\n\u9009\u62e9 `Track Type` \u9009\u62e9 `Event`; `Category`, `Action`, `Label` \u7684\u503c\u4fbf\u4e8e\u8bc6\u522b\u5373\u53ef\uff0c`Value` \u5efa\u8bae\u586b `1`, \u4f5c\u4e3a\u5355\u8bcd\u7edf\u8ba1\u7684\u57fa\u6570\u3002\\n![GTM Tag Config](/images/gtm/gtm-tag-config.png)\\n\\n### 3.2 \u65b0\u5efa\u53d8\u91cf\\n\u7136\u540e\uff0c\u9700\u8981\u5173\u8054\u5230 GA, \u9009\u62e9 `New Variable`, \u914d\u7f6e GA \u7684 Tracking ID \uff08\u53ef\u5728 https://analytics.google.com \u4e2a\u4eba\u7ba1\u7406\u4e2d\u627e\u5230\uff09\u3002\\n\u53d8\u91cf\u521b\u5efa\u4e00\u6b21\u540e\u53ef\u4ee5\u5728\u4fa7\u8fb9\u680f `Variables` \u8fdb\u884c\u7ba1\u7406\u3002\\n![GTM Variable for GA](/images/gtm/gtm-tag-variable.png)\\n\\n\u547d\u540d\uff0c\u4fdd\u5b58\u3002\\n\\n## 4. \u5efa Trigger\\n\u521b\u5efa\u597d Tag \u540e\u9700\u8981\u5173\u8054 Trigger\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6211\u60f3\u7edf\u8ba1\u9605\u8bfb `Google Tag Manager` \u76f8\u5173\u6587\u7ae0\u7684 PV \u603b\u6570\uff0c\u53ef\u4ee5\u9009\u62e9 `Page View` \u7c7b\u578b\u7684 `Track Type`, \u7136\u540e\u6dfb\u52a0\u4e00\u4e2a\u89e6\u53d1\u89c4\u5219\uff0c\u793a\u56fe\u5982\u4e0b\uff1a\\n\\n![GTM Trigger](/images/gtm/gtm-trigger.png)\\n\\n\u8ffd\u8e2a\u7c7b\u578b\u3001\u89e6\u53d1\u89c4\u5219\u8981\u5bb9\u6613\u533a\u5206\u6211\u4eec\u60f3\u8981\u7edf\u8ba1\u7684\u9875\u9762\u6216\u8005\u64cd\u4f5c\u3002\u8fd9\u4e2a\u4ee5\u540e\u518d\u8bb2\u3002\\n\\n## 5. Preview \u8c03\u8bd5\\nTag, Trigger \u914d\u7f6e\u597d\u540e\uff0c\u53ef\u4ee5\u70b9\u51fb \u201cPreview\u201d \u5f00\u542f Debug \u6a21\u5f0f\u8fdb\u884c\u672c\u5730\u9884\u89c8\u3002\\n\\n\u9884\u89c8\uff1a\\n![GTM Preview](/images/gtm/gtm-preview.png)\\n\\n\u672c\u5730 Debug \u89e6\u53d1\u7684 Trigger & Tag:\\n![GTM Debug](/images/gtm/gtm-debug.png)\\n\\n\u4e0a\u62a5\u7684 Tag \u4fe1\u606f\uff1a\\n![GTM Debug 2](/images/gtm/gtm-debug2.png)\\n\\nGA \u7edf\u8ba1\u5230\u7684\u6570\u636e\uff1a\\n![GA](/images/gtm/ga-event.png)\\n\\n\u8c03\u8bd5 OK\uff0c\u63a8\u51fa Debug\uff0c\u51c6\u5907\u53d1\u5e03\u3002\\n\\n## 6. \u53d1\u5e03\\nGoogle Tag Manager \u63d0\u4f9b\u4e86\u4fbf\u6377\u7684\u7248\u672c\u7ba1\u7406\u529f\u80fd\uff0c\u586b\u5199\u597d\u53d1\u5e03\u4fe1\u606f\u63d0\u4ea4\u5427\u3002\\n\\n\u4ee5\u4e0a\uff0c\u5c31\u662f\u4e00\u6b21 GTM \u57fa\u672c\u5e94\u7528\u914d\u7f6e\u4e86\u3002\\n\\n## \u603b\u7ed3\\nGoogle Tag Manager \u4e2d Tag \u548c Trigger \u63d0\u4f9b\u7684\u529f\u80fd\u5341\u5206\u4e30\u5bcc\uff0c\u9700\u8981\u6839\u636e\u6211\u4eec\u81ea\u8eab\u7684\u7edf\u8ba1\u9700\u6c42\u9009\u62e9\u914d\u7f6e\u3002\\n\u5f00\u59cb\u6216\u8bb8\u5f88\u590d\u6742\uff0c\u719f\u6089\u4e4b\u540e\u5c31\u5f88\u65b9\u4fbf\u5feb\u6377\u4e86\uff0c\u8bd5\u8bd5\u770b\u5427\u3002"},{"id":"/webhooks-deploy","metadata":{"permalink":"/blog/webhooks-deploy","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/webhooks-deploy.md","source":"@site/blog/webhooks-deploy.md","title":"Webhooks - \u7f51\u7ad9\u81ea\u52a8\u5316\u90e8\u7f72\u5b9e\u8df5","description":"\u672c\u6587\u8bb0\u5f55\u4e86\u4f7f\u7528 Github \u7684 Webhooks \u8fdb\u884c\u7f51\u7ad9\u81ea\u52a8\u5316\u90e8\u7f72\u7684\u5b9e\u8df5\u6b65\u9aa4\u3002","date":"2019-03-18T15:10:03.000Z","formattedDate":"2019\u5e743\u670818\u65e5","tags":[{"label":"node","permalink":"/blog/tags/node"},{"label":"git","permalink":"/blog/tags/git"}],"readingTime":3.775,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Webhooks - \u7f51\u7ad9\u81ea\u52a8\u5316\u90e8\u7f72\u5b9e\u8df5","comments":true,"date":"2019-03-18T15:10:03.000Z","updated":"2019-03-20T11:17:03.000Z","tags":["node","git"],"categories":["web"]},"prevItem":{"title":"Google Tag Manager \u57fa\u672c\u5e94\u7528\u4e0e\u5b9e\u8df5","permalink":"/blog/gtm-basic"},"nextItem":{"title":"Node \u56fe\u7247\u7ed8\u5236\u53ca\u5408\u6210\u4ecb\u7ecd","permalink":"/blog/node-draw-image"}},"content":"\u672c\u6587\u8bb0\u5f55\u4e86\u4f7f\u7528 `Github` \u7684 `Webhooks` \u8fdb\u884c\u7f51\u7ad9\u81ea\u52a8\u5316\u90e8\u7f72\u7684\u5b9e\u8df5\u6b65\u9aa4\u3002\\n\\n\x3c!--truncate--\x3e\\n## \u6982\u8ff0\\n\u6211\u4eec\u5c06\u9879\u76ee\u4ee3\u7801\u6258\u7ba1\u5230 Github \u4e0a\uff0c\u4e3a\u65b9\u4fbf\u670d\u52a1\u7aef\u66f4\u65b0\u7f51\u7ad9\u4ee3\u7801\uff0c\u542f\u7528 Webhooks \u6765\u5b9e\u73b0\u66f4\u65b0\u670d\u52a1\u3002\\n\\n\u6574\u4e2a\u8fc7\u7a0b\u5206\u4e3a 4 \u6b65\uff1a\\n1. \u81ea\u52a8\u5316 Shell \u811a\u672c\u66f4\u65b0\u4ee3\u7801;\\n2. Node Server \u76d1\u542c webhook push \u4e8b\u4ef6;\\n3. pm2 \u5b88\u62a4 Server \u8fdb\u7a0b\\n4. \u914d\u7f6e Github webhooks.\\n\\n\u914d\u7f6e\u6240\u9700\uff1a\\n* shell \u811a\u672c\\n* Node Server\\n* github-webhook-handler\\n* pm2\\n\\n## \u81ea\u52a8\u5316 Shell \u811a\u672c\\n> \u8be5\u811a\u672c\u7684\u76ee\u7684\u662f\u5728\u76ee\u6807\u670d\u52a1\u5668\u4e0a pull \u8fdc\u7a0b\u4ee3\u7801\u4ee5\u5b9e\u73b0\u8fed\u4ee3\u66f4\u65b0\u3002\\n\\n\u5f53\u6211\u4eec\u5728\u672c\u5730\u5f00\u53d1\u6d4b\u8bd5\u540e\uff0c\u5c06\u4ee3\u7801 push \u5230 Github \u4e0a\uff0c\u4f1a\u89e6\u53d1\u5df2\u914d\u7f6e\u597d\u7684 Webhooks\uff0c\u5728\u76ee\u6807\u670d\u52a1\u5668\u4e0a\u6267\u884c\u8fd9\u6bb5 Shell \u811a\u672c\u3002\\n\u6211\u4eec\u5728\u9879\u76ee root \u76ee\u5f55\u4e0b\u521b\u5efa `deploy.sh` \u6587\u4ef6\uff0c\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\u3002\\n\\n```bash\\n#! /bin/bash\\n# \u786e\u4fdd\u811a\u672c\u629b\u51fa\u9047\u5230\u7684\u9519\u8bef\\nset -e\\n\\ncd /www/learning-handbook\\n\\ngit reset --hard origin/master\\ngit clean -f\\ngit pull\\n```\\n\\n\u5b9e\u73b0\u4e86 Shell \u811a\u672c\u540e\uff0c\u6211\u4eec\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a Server \u7ed9 Webhooks \u8c03\u7528\u5b83\u3002\\n\\n## Node Server \u5b9e\u73b0\u66f4\u65b0\u670d\u52a1\\n\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u901a\u8fc7 `Nodejs` \u521b\u5efa\u4e00\u4e2a Server \u6765\u5b9e\u73b0\u66f4\u65b0\u670d\u52a1\u3002\\n\u8fd9\u91cc\u6211\u4eec\u9700\u8981\u501f\u52a9 `github-webhook-handler` \u6765\u76d1\u542c Github webhooks \u7684 `push` \u8bf7\u6c42\uff0c\u8bf7\u6c42\u6210\u529f\u540e\u901a\u8fc7 `child_process` \u6267\u884c\u4e0a\u9762\u7684 Shell \u811a\u672c\uff0c\u5c31\u80fd\u5728\u670d\u52a1\u5668\u4e0a\u83b7\u53d6\u66f4\u65b0\u4e86\u3002\\n\\n### server\\n\u540c\u6837\uff0c\u5728\u9879\u76ee root \u4e0b\u521b\u5efa `webhook.js` \u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```js\\nconst http = require(\'http\')\\nconst { spawn } = require(\'child_process\')\\nconst createHandler = require(\'github-webhook-handler\')\\n\\n// \u4e0b\u9762\u8fd9\u4e2a secret \u662f\u4f60\u5728 github webhook \u91cc\u8bbe\u7f6e\u7684 secret \u503c\\nconst handler = createHandler({ path: \'/deploy\', secret: \'xxx\' })\\n\\nconst PORT = 6666\\n\\nhttp.createServer((req, res) => {\\n  handler(req, res, err => {\\n    res.statusCode = 404\\n    res.end(\'no such location\')\\n  })\\n}).listen(PORT)\\n\\nhandler.on(\'error\', err => {\\n  console.error(\'Error:\', err.message)\\n})\\n\\n// \u76d1\u542c\u5230push\u4e8b\u4ef6\u7684\u65f6\u5019\u6267\u884c\u6211\u4eec\u7684\u81ea\u52a8\u5316\u811a\u672c\\nhandler.on(\'push\', event => {\\n  console.log(\'Received a push event for %s to %s\',\\n    event.payload.repository.name,\\n    event.payload.ref)\\n  runCommand(\'sh\', [\'./deploy.sh\'], console.log)\\n})\\n\\nfunction runCommand( cmd, args, callback ){\\n    let response = \'\'\\n    const child = spawn( cmd, args )\\n    child.stdout.on(\'data\', buffer => { response += buffer.toString() })\\n    child.stdout.on(\'end\', () => callback(response))\\n}\\n```\\n\\n### nginx \u53cd\u5411\u4ee3\u7406\\n\u914d\u7f6e nginx \u53cd\u5411\u4ee3\u7406 `/deploy`\\n\\n```nginx\\n\xb7\xb7\xb7\\nserver {\\n    listen 80;\\n    server_name handbook.p2yang.com;\\n    \xb7\xb7\xb7\\n    location /deploy {\\n        proxy_pass http://127.0.0.1:6666;\\n    }\\n    \xb7\xb7\xb7\\n}\\n```\\n\\n\\n## \u914d\u7f6e Webhook\\nWebhooks \u5728 Github \u9879\u76ee\u7684 `Settings` \u91cc\u3002\u8fdb\u5165\u5176\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684 webhook\uff0c\u5982\u4e0b\u56fe\uff1a\\n\\n![Github webhooks](/images/github-webhook.png)\\n\\n\u6ce8\u610f\uff0c\u7531\u4e8e\u6211\u4eec\u4e0a\u9762\u4f7f\u7528\u7684 `github-webhook-handler` \u8981\u6c42 `Content type` \u5fc5\u987b\u8bbe\u7f6e\u6210 `application/json`\u3002\\n`Payload URL` \u548c `Secret` \u503c\u4e0e Server \u914d\u7f6e\u9700\u8981\u4fdd\u6301\u4e00\u81f4\u3002\\n\\n```js\\nconst handler = createHandler({ path: \'/deploy\', secret: \'xxx\' })\\n```\\n\\n\u5f53\u670d\u52a1\u5168\u90e8\u914d\u7f6e\u6210\u529f\u540e\uff0cwebhook \u7684\u72b6\u6001\u5982\u4e0b:\\n\\n![Github webhook push status](/images/github-webhook-status.png)\\n\\n## \u521d\u6b21\u90e8\u7f72\\n\u7b2c\u4e00\u6b21\u90e8\u7f72\uff0c\u9700\u8981\u5148\u5728\u76ee\u6807\u670d\u52a1\u5668\u4e0a git clone \u4e0b\u9879\u76ee\u4ee3\u7801\u3002\\n\\n## pm2 \u5b88\u62a4\\n\u8fd9\u91cc\u4f7f\u7528 `pm2` \u6765\u5b88\u62a4 Server \u66f4\u65b0\u670d\u52a1\u3002\u57fa\u672c\u7528\u6cd5\u5982\u4e0b\uff1a\\n\\n### \u9996\u5148\u5168\u5c40\u5b89\u88c5 `pm2`:\\n```bash\\nnpm install pm2 -g\\n```\\n\\n### \u542f\u52a8\u670d\u52a1:\\n```bash\\npm2 start webhook.js\\n```\\n\\n### \u67e5\u770b\u670d\u52a1\u5217\u8868\\n```bash\\npm2 list\\n```\\n\\n### \u67e5\u770b\u65e5\u5fd7\\n```bash\\npm2 log [\u670d\u52a1\u540d\u6216\u670d\u52a1id]\\n```\\n\\n### \u5176\u4ed6\\n```bash\\npm2 stop\\npm2 restart\\npm2 delete\\n```\\n\\n\u5927\u529f\u544a\u6210\uff01\\n\\n## \u5c0f\u7ed3\\n\u80fd\u81ea\u52a8\u7684\u5c31\u81ea\u52a8\u5427\uff0c\u6211\u4eec\u7684\u65f6\u95f4\u53ef\u4ee5\u82b1\u5728\u66f4\u6709\u8da3\u7684\u4e8b\u60c5\u4e0a\uff01"},{"id":"/node-draw-image","metadata":{"permalink":"/blog/node-draw-image","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/node-draw-image.md","source":"@site/blog/node-draw-image.md","title":"Node \u56fe\u7247\u7ed8\u5236\u53ca\u5408\u6210\u4ecb\u7ecd","description":"\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd Node \u56fe\u7247\u7ed8\u5236\u53ca\u5408\u6210\u7684\u4e00\u4e9b\u65b9\u5f0f\uff0c\u4e0d\u6d89\u53ca\u56fe\u8868\u76f8\u5173\u3002","date":"2019-01-17T10:14:09.000Z","formattedDate":"2019\u5e741\u670817\u65e5","tags":[{"label":"node","permalink":"/blog/tags/node"}],"readingTime":1.29,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Node \u56fe\u7247\u7ed8\u5236\u53ca\u5408\u6210\u4ecb\u7ecd","comments":true,"date":"2019-01-17T10:14:09.000Z","updated":"2019-01-17T10:14:09.000Z","tags":["node"],"categories":null},"prevItem":{"title":"Webhooks - \u7f51\u7ad9\u81ea\u52a8\u5316\u90e8\u7f72\u5b9e\u8df5","permalink":"/blog/webhooks-deploy"},"nextItem":{"title":"iOS Simulator \u6a21\u62df\u5668 - web \u9875\u9762\u8c03\u8bd5\u5b9e\u8df5","permalink":"/blog/simulator-dev"}},"content":"\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd Node \u56fe\u7247\u7ed8\u5236\u53ca\u5408\u6210\u7684\u4e00\u4e9b\u65b9\u5f0f\uff0c\u4e0d\u6d89\u53ca\u56fe\u8868\u76f8\u5173\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u5b9e\u8df5\u65b9\u5f0f\\n1. node-canvas - \u7c7b\u524d\u7aef\\n\\t\u8fd9\u91cc\u8bf4\u7684 canvas \u662f web canvas \u7684 node \u5b9e\u73b0\u3002\u5176 api \u4e0e web canvas \u9ad8\u5ea6\u76f8\u4f3c\u3002\\n\\n\\t\u5b89\u88c5\uff1a\\n\\t```bash\\n\\tnpm install canvas\\n\\t```\\n\\n2. gm - node\\n\\t`gm` \u662f\u901a\u8fc7 node \u8c03\u7528 `GraphicsMagick` \u548c `ImageMagick` \u6765\u5b9e\u73b0\u7ed8\u56fe\u529f\u80fd\u7684\u3002\u5176\u4e2d\uff0cGraphicsMagick \u201c\u77ed\u5c0f\u7cbe\u608d\u201d\uff0c\u53f7\u79f0\u662f\u201c\u56fe\u50cf\u5904\u7406\u9886\u57df\u7684\u745e\u58eb\u519b\u5200\u201d, \u662f\u4ece ImageMagick 5.2.2 \u4e2d\u72ec\u7acb\u51fa\u6765\u7684\u3002\\n    `gm` \u652f\u6301\u94fe\u5f0f\u8c03\u7528\uff0c\u57fa\u672c\u529f\u80fd\u7c7b\u4f3c canvas api\uff0c\u4f46\u66f4\u5f3a\u5927\u3002\u53ef\u67e5\u770b\u5b98\u65b9\u6587\u6863\u6df1\u5165\u7814\u7a76\u3002\\n\\n\\t\u4f7f\u7528\u65b9\u6cd5\uff1a\\n\\n\\t#### (1) \u4e0b\u8f7d GraphicsMagick \u548c ImageMagick\\n\\n\\tMac \u4e0a\u53ef\u4ee5\u76f4\u63a5\u76f4\u63a5\u4f7f\u7528 `Homebrew` \u4e0b\u8f7d\u5b89\u88c5\uff1a\\n\\n\\t```bash\\n\\tbrew install imagemagick\\n\\tbrew install graphicsmagick\\n\\t```\\n\\n\\t#### (2) \u5b89\u88c5 gm\\n\\t```bash\\n\\tnpm install gm\\n\\t```\\n\\n\\t#### (3) \u57fa\u672c\u4f7f\u7528\\n\\t```js\\n\\tconst gm = require(\'gm\')\\n\\tgm(\'/path/to/img.jpg\')\\n\\t\\t.font(\'/path/to/font.ttc\') // \u5b57\u4f53\u6587\u4ef6\\n        .fontSize(70)\\n        .fill(\'#ffe600\')\\n        .drawText(0, 70, \'Hello\')\\n        .resize(200, 100)\\n\\t\\t.write(\'/path/to/resize.png\', function (err) {\\n\\t\\t  if (!err) console.log(\'done\')\\n\\t\\t})\\n\\t```\\n\\n### \u4e00\u4e9b\u6709\u610f\u601d\u7684 Package\\n+ [d3](https://github.com/d3/d3)\\n+ [matter-js](https://github.com/liabru/matter-js)\\n+ [Proton](https://github.com/a-jie/Proton)\\n+ [Paper.js](http://paperjs.org)\\n+ [sprite.js](https://github.com/spritejs/spritejs)\\n\\n## \u53c2\u8003\u94fe\u63a5\\n+ [node-canvas](https://github.com/Automattic/node-canvas)\\n+ [gm](https://github.com/aheckmann/gm)\\n+ [GraphicsMagick](http://www.graphicsmagick.org/)"},{"id":"/simulator-dev","metadata":{"permalink":"/blog/simulator-dev","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/simulator-dev.md","source":"@site/blog/simulator-dev.md","title":"iOS Simulator \u6a21\u62df\u5668 - web \u9875\u9762\u8c03\u8bd5\u5b9e\u8df5","description":"\u4f4e\u7248\u672c iOS safari \u5982\u4f55\u8c03\u8bd5\uff1f\u5728\u771f\u673a\u96be\u6c42\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u7528 Mac iOS Simulator \u8fdb\u884c\u8c03\u8bd5\u3002","date":"2018-11-06T16:06:40.000Z","formattedDate":"2018\u5e7411\u67086\u65e5","tags":[{"label":"Tool","permalink":"/blog/tags/tool"},{"label":"ios","permalink":"/blog/tags/ios"}],"readingTime":1.505,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"iOS Simulator \u6a21\u62df\u5668 - web \u9875\u9762\u8c03\u8bd5\u5b9e\u8df5","comments":true,"date":"2018-11-06T16:06:40.000Z","updated":"2018-11-06T16:06:40.000Z","tags":["Tool","ios"],"categories":["Tool","ios"]},"prevItem":{"title":"Node \u56fe\u7247\u7ed8\u5236\u53ca\u5408\u6210\u4ecb\u7ecd","permalink":"/blog/node-draw-image"},"nextItem":{"title":"Canvas \u8de8\u57df\u8131\u5751\u5b9e\u8df5","permalink":"/blog/canvas-to-img"}},"content":"\u4f4e\u7248\u672c iOS safari \u5982\u4f55\u8c03\u8bd5\uff1f\u5728\u771f\u673a\u96be\u6c42\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u7528 Mac `iOS Simulator` \u8fdb\u884c\u8c03\u8bd5\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u64cd\u4f5c\u6b65\u9aa4\\n1. \u5b89\u88c5\u4e0b\u8f7d Xcode\\n\\t\u5728 App Store \u4e2d\u641c\u7d22 Xcode \u4e0b\u8f7d\u5b89\u88c5\u3002\\n\\n\\t\u8bf4\u660e\uff1a\u672c\u6587\u57fa\u4e8e Xcode 10.1 \u521b\u4f5c\u3002\\n\\n2. \u6253\u5f00 Simulator\\n\\t\u4f9d\u6b21\u9009\u62e9\u83dc\u5355\u680f: `Xcode -> Open Developer Tool -> Simulator`\uff0c\u5982\u56fe\uff1a\\n\\n\\t![](/images/simulator/open.png)\\n\\n\\t\u7ecf\u8fc7\u521d\u59cb\u5316\u540e\uff0c\u51fa\u73b0\u5982\u4e0b\u754c\u9762:\\n\\n\\t![](/images/simulator/device.png)\\n\\n\\t\u53ef\u4ee5\u6253\u5f00\u83dc\u5355\u680f: `Hardware -> Device` \u9009\u62e9\u5207\u6362\u6210\u4f60\u60f3\u8981\u7684\u7cfb\u7edf\u7248\u672c\u3001\u8bbe\u5907\u7c7b\u578b\u3002\\n\\n3. \u8c03\u8bd5\\n\\t\u6211\u4eec\u7528 Mac \u4e0a\u7684 Safari \u5f00\u53d1\u8005\u5de5\u5177\u8fdb\u884c\u8c03\u8bd5\u3002\\n\\n\\t\u9996\u5148\u6253\u5f00 Simulator \u4e2d\u7684 Safari, \u8bbf\u95ee\u76ee\u6807 web \u9875\u9762\u3002\\n\\n\\t\u7136\u540e\u6253\u5f00 mac \u4e0a\u7684 Safari\uff0c\u9009\u62e9 `\u5f00\u53d1 -> \u6a21\u62df\u5668 -> \u76ee\u6807url` \u5373\u53ef\u6253\u5f00\u5bf9\u5e94\u7684\u5f00\u53d1\u8005\u5de5\u5177\u8fdb\u884c\u8c03\u8bd5\u3002\\n\\t\uff08\u5982\u6ca1\u6709`\u5f00\u53d1`\u83dc\u5355\uff0c\u8bf7\u4ece Safari \u504f\u597d\u8bbe\u7f6e\u91cc\u542f\u7528\u6b64\u529f\u80fd\u3002\uff09\\n\\n\\t![](/images/simulator/dev.png)\\n\\n4. \u9009\u62e9\u7cfb\u7edf\u7248\u672c\\n\\t\u9ed8\u8ba4\u7684 Simulator \u652f\u6301\u7684 iOS \u7248\u672c\u53ea\u6709\u4e00\u4e2a\uff0c\u6b64\u65f6\uff0c\u6211\u4eec\u9700\u8981\u624b\u52a8\u5230 Xcode \u91cc\u4e0b\u8f7d\u60f3\u8981\u7684 iOS \u7248\u672c\u3002\\n\\n\\t\u4f9d\u6b21\u6253\u5f00 `Xcode -> Preferences -> Components` \uff0c\u4e0b\u8f7d\u76ee\u6807\u7248\u672c\uff0c\u5b8c\u6210\u4e4b\u540e\u91cd\u65b0\u6253\u5f00 Simulator\uff0c\u5c31\u80fd\u4ece `Hardware` \u91cc\u8fdb\u884c\u5207\u6362\u4e86\u3002\\n\\n\\t![](/images/simulator/components.png)\\n\\n\u4ee5\u4e0a\uff0c\u5c31\u662f\u7528 iOS Simulator \u8c03\u8bd5\u7684\u57fa\u672c\u8fc7\u7a0b\u3002"},{"id":"/canvas-to-img","metadata":{"permalink":"/blog/canvas-to-img","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/canvas-to-img.md","source":"@site/blog/canvas-to-img.md","title":"Canvas \u8de8\u57df\u8131\u5751\u5b9e\u8df5","description":"Canvas \u8de8\u57df\u5982\u4f55\u89e3\u51b3\uff1f\u8fd9\u91cc\u8bb0\u5f55\u4e0b\u4f7f\u7528 Canvas \u7ed8\u56fe\u8fc7\u7a0b\u4e2d\u6240\u9047\u5230\u7684\u8de8\u57df\u95ee\u9898\u548c\u89e3\u51b3\u65b9\u6848\u3002","date":"2018-11-02T14:35:29.000Z","formattedDate":"2018\u5e7411\u67082\u65e5","tags":[{"label":"Canvas","permalink":"/blog/tags/canvas"}],"readingTime":3.235,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Canvas \u8de8\u57df\u8131\u5751\u5b9e\u8df5","comments":true,"date":"2018-11-02T14:35:29.000Z","updated":"2018-11-02T14:35:29.000Z","tags":["Canvas"],"categories":["web"]},"prevItem":{"title":"iOS Simulator \u6a21\u62df\u5668 - web \u9875\u9762\u8c03\u8bd5\u5b9e\u8df5","permalink":"/blog/simulator-dev"},"nextItem":{"title":"Google Robots","permalink":"/blog/google-robots"}},"content":"`Canvas` \u8de8\u57df\u5982\u4f55\u89e3\u51b3\uff1f\u8fd9\u91cc\u8bb0\u5f55\u4e0b\u4f7f\u7528 `Canvas` \u7ed8\u56fe\u8fc7\u7a0b\u4e2d\u6240\u9047\u5230\u7684\u8de8\u57df\u95ee\u9898\u548c\u89e3\u51b3\u65b9\u6848\u3002\\n\\n\u5148\u6765\u770b\u4e0b\u5b9e\u73b0\u65b9\u6cd5\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u5b9e\u73b0\u65b9\u6cd5\\n\u76ee\u6807\u56fe\u7247\u4e00\u822c\u662f\u7531 \u56fe\u7247 + \u6587\u672c \u6784\u6210\u3002\u65e0\u8bba\u662f\u5343\u5947\u767e\u602a\u7684\u5927\u5c0f\u56fe\u7247\uff0c\u8fd8\u662f\u53d8\u5e7b\u83ab\u6d4b\u7684\u5404\u5f0f\u6587\u672c\uff0c\u90fd\u80fd\u7528 `canvas` api `drawImage` \u548c `fillText` \u65b9\u6cd5\u6765\u5b8c\u6210\u3002\\n\\n\u57fa\u672c\u6d41\u7a0b\u5982\u4e0b:\\n\\n1. \u83b7\u53d6 `canvas` \u4e0a\u4e0b\u6587 -- `ctx`\\n\\n\\t```js\\n\\tconst canvas = document.querySelector(selector)\\n\\tconst ctx = canvas.getContext(\'2d\')\\n\\t```\\n\\n2. \u7ed8\u56fe\\n\u5ffd\u7565\u56fe\u7247\u4e0a\u7684\u5185\u5bb9\uff0c\u76f4\u63a5\u7528 `drawImage` \u5c06\u5176\u753b\u5230 `canvas` \u753b\u5e03\u4e0a\u5373\u53ef\u3002\\n\\n\\t```js\\n\\tconst image = new Image()\\n\\timage.src = src\\n\\timage.onload = () => {\\n\\t\\tctx.save()\\n\\t\\t// \u8fd9\u91cc\u6211\u4eec\u91c7\u7528\u4ee5\u4e0b\u53c2\u6570\u8c03\u7528\\n\\t\\tthis.ctx.drawImage(image, dx, dy, dWidth, dHeight)\\n\\t\\tthis.ctx.restore()\\n\\t}\\n\\t```\\n\\n\\t`drawImage` \u67093\u79cd\u53c2\u6570\u4f7f\u7528\u65b9\u5f0f\uff0c\u5177\u4f53\u7528\u6cd5\u53ef\u4ee5\u67e5\u770b [MDN \u6587\u6863](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage)\u3002\\n\\n3. \u83b7\u53d6\u56fe\u50cf\u6570\u636e\\n\u8c03\u7528 `HTMLCanvasElement` DOM \u5bf9\u8c61\u63d0\u4f9b\u7684 `toBlob()`, `toDataURL()` \u6216 `getImageData()` \u65b9\u6cd5\uff0c\u5373\u53ef\u3002\\n\\n\\t```js\\n\\tcanvas.toBlob(blob => {\\n\\t\\t// \u4f60\u8981\u7684 blob\\n\\t}, mimeType, encoderOptions)\\n\\t```\\n\\n\\t\u8fd9\u91cc\u7684 `mimeType` \u9ed8\u8ba4\u503c\u4e3a `image/png`\u3002`encoderOptions` \u6307\u5b9a\u4e86\u56fe\u7247\u8d28\u91cf\uff0c\u53ef\u7528\u4e8e\u538b\u7f29\uff0c\u4e0d\u8fc7\u9700\u8981 `mimeType` \u683c\u5f0f\u4e3a `image/jpeg` \u6216\u8005 `image/webp`\u3002\\n\\n## Canvas \u8de8\u57df\\n\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u9700\u8981\u5c06\u7ed8\u5236\u597d\u7684\u56fe\u50cf\u8f93\u51fa\uff0c\u6211\u4eec\u53ef\u4ee5\u8c03\u7528 `canvas` \u7684 `toBlob()`, `toDataURL()` \u6216 `getImageData()` \u65b9\u6cd5\u6765\u83b7\u53d6\u5230\u56fe\u50cf\u6570\u636e\u3002\u7136\u800c\uff0c\u9047\u5230\u56fe\u7247\u8de8\u57df\u7684\u60c5\u51b5\u5c31\u6709\u4e9b\u5c34\u5c2c\u4e86\u3002\u53ef\u80fd\u56de\u62a5\u5982\u4e0b\u9519\u8bef:\\n\\n```\\nFailed to execute \'toBlob\' on \'HTMLCanvasElement\': Tainted canvases may not be exported.\\n```\\n\\n\u6216\u8005\\n\\n```\\nAccess to image at \'https://your.image.src\' from origin \'https://your.website\' has been blocked by CORS policy: No \'Access-Control-Allow-Origin\' header is present on the requested resource.\\n```\\n\\n\u5148\u6765\u770b\u770b\u7b2c2\u79cd\u60c5\u51b5\u3002\\n\\n+ `Access-Control-Allow-Origin`\\n\\t\u5982\u679c\u4f60\u8de8\u57df\u4f7f\u7528\u67d0\u4e9b\u56fe\u7247\u8d44\u6e90\uff0c\u5e76\u4e14\u8be5\u670d\u52a1\u672a\u6b63\u786e\u54cd\u5e94 `Access-Control-Allow-Origin` \u5934\u4fe1\u606f, \u5219\u4f1a\u62a5\u51fa\u5982\u4e0b\u9519\u8bef\u4fe1\u606f:\\n\\n\\t```\\n\\tAccess to image at \'https://your.image.src\' from origin \'https://your.website\' has been blocked by CORS policy: No \'Access-Control-Allow-Origin\' header is present on the requested resource.\\n\\t```\\n\\n\\t\u8bf4\u660e\u4e0d\u5141\u8bb8\u8de8\u57df\u8bbf\u95ee\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u8bd5\u7740\u8ba9\u540e\u53f0\u4fee\u6539 `Access-Control-Allow-Origin` \u7684\u503c\u4e3a `*` \u6216 `your.website`, \u6216\u8005\u6539\u7528\u540c\u57df\u8d44\u6e90\uff08\u8003\u8651\u4e0b\uff1f\uff09\u3002\\n\\n\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u6765\u89e3\u51b3\u7b2c1\u79cd\u60c5\u51b5\u3002\\n\\n+ `img.crossOrigin = \'Anonymous\'`\\n\\t\u4e3a\u907f\u514d\u672a\u7ecf\u8bb8\u53ef\u62c9\u53d6\u8fdc\u7a0b\u7f51\u7ad9\u4fe1\u606f\u800c\u5bfc\u81f4\u7684\u7528\u6237\u9690\u79c1\u6cc4\u9732\uff08\u5982 GPS \u7b49\u4fe1\u606f\uff0c\u5177\u4f53\u53ef\u641c\u7d22 Exif\uff09\uff0c\u5728\u8c03\u7528 `canvas` \u7684 `toBlob()`, `toDataURL()` \u6216 `getImageData()` \u4f1a\u629b\u51fa\u5b89\u5168\u9519\u8bef:\\n\\n\\t```\\n\\tFailed to execute \'toBlob\' on \'HTMLCanvasElement\': Tainted canvases may not be exported.\\n\\t```\\n\\n\\t\u5982\u679c\u4f60\u7684\u56fe\u7247\u670d\u52a1\u5141\u8bb8\u8de8\u57df\u4f7f\u7528\uff08\u5982\u679c\u4e0d\u5141\u8bb8\uff0c\u89c1\u4e0a\u6761\uff09\uff0c\u90a3\u4e48\u4f60\u8be5\u8003\u8651\u4e0b\u7ed9 img \u5143\u7d20\u52a0\u4e0a `crossOrigin` \u5c5e\u6027\uff0c\u5373\uff1a\\n\\n\\t```js\\n\\tconst image = new Image()\\n\\timage.crossOrigin = \'Anonymous\'\\n\\timage.src = src\\n\\t```\\n\\n\u5982\u6b64\uff0c\u4f60\u4fbf\u53ef\u4ee5\u62ff\u5230\u56fe\u7247\u6570\u636e\u4e86\u3002\u5982\u679c\u6ca1\u62db\uff0c\u6362\u540c\u57df\u8d44\u6e90\u5427\uff5e"},{"id":"/google-robots","metadata":{"permalink":"/blog/google-robots","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/google-robots.md","source":"@site/blog/google-robots.md","title":"Google Robots","description":"\u5982\u679c\u4e0d\u60f3 Google \u722c\u866b\u6293\u53d6\u67d0\u4e2a\u9875\u9762\uff0c\u53ef\u4ee5\u8003\u8651\u6dfb\u52a0 robots.txt \u6587\u4ef6\u8fdb\u884c\u9009\u62e9\u6027\u5c4f\u853d\u3002","date":"2018-09-12T19:33:04.000Z","formattedDate":"2018\u5e749\u670812\u65e5","tags":[{"label":"Tools","permalink":"/blog/tags/tools"}],"readingTime":3.415,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Google Robots","comments":true,"date":"2018-09-12T19:33:04.000Z","updated":"2018-09-13T16:05:04.000Z","tags":["Tools"],"categories":null},"prevItem":{"title":"Canvas \u8de8\u57df\u8131\u5751\u5b9e\u8df5","permalink":"/blog/canvas-to-img"},"nextItem":{"title":"webpack profile \u6587\u4ef6\u5206\u6790\u529f\u80fd","permalink":"/blog/webpack-profile-stats"}},"content":"\u5982\u679c\u4e0d\u60f3 Google \u722c\u866b\u6293\u53d6\u67d0\u4e2a\u9875\u9762\uff0c\u53ef\u4ee5\u8003\u8651\u6dfb\u52a0 `robots.txt` \u6587\u4ef6\u8fdb\u884c\u9009\u62e9\u6027\u5c4f\u853d\u3002\\n> `robots.txt` \u6587\u4ef6\u4f4d\u4e8e\u60a8\u7f51\u7ad9\u7684\u6839\u76ee\u5f55\u4e0b\uff0c\u7528\u4e8e\u8868\u660e\u60a8\u4e0d\u5e0c\u671b\u641c\u7d22\u5f15\u64ce\u6293\u53d6\u5de5\u5177\u8bbf\u95ee\u60a8\u7f51\u7ad9\u4e0a\u7684\u54ea\u4e9b\u5185\u5bb9\u3002--- Google\\n\\n\x3c!--truncate--\x3e\\n### \u4e00\u4e2a\u793a\u4f8b\\n\u5c06 `robots.txt` \u6dfb\u52a0\u5230\u7f51\u7ad9\u6839\u76ee\u5f55\u4e0b\uff0c\u793a\u4f8b\u5982\u4e0b\\n```\\nUser-agent: *\\nDisallow: /particles\\nAllow: /\\n\\n# \u672c\u7ad9\u6682\u65f6\u8fd8\u672a\u6dfb\u52a0 sitemap\\n# Sitemap: http://www.p2yang.com/sitemap.xml\\n```\\n\\n### \u8bed\u6cd5\\n\\n> robots.txt \u6587\u4ef6\u4e2d\u4f7f\u7528\u4e86\u4ee5\u4e0b\u5173\u952e\u5b57\uff1a\\n> * User-agent\uff1a[\u5fc5\u9700\uff0c\u6bcf\u6761\u89c4\u5219\u9700\u8981\u4e00\u4e2a\u6216\u591a\u4e2a] \u6b64\u6761\u89c4\u5219\u6240\u8981\u5e94\u7528\u5230\u7684\u641c\u7d22\u5f15\u64ce\u201c\u6f2b\u6e38\u5668\u201d\uff08\u5373\u7f51\u9875\u6293\u53d6\u5de5\u5177\u8f6f\u4ef6\uff09\u7684\u540d\u79f0\u3002Web Robots Database \u548c Google \u7528\u6237\u4ee3\u7406\u5217\u8868\u4e2d\u5217\u51fa\u4e86\u5927\u591a\u6570\u7528\u6237\u4ee3\u7406\u540d\u79f0\u3002\u652f\u6301\u4f7f\u7528\u661f\u53f7 (\\\\*) \u901a\u914d\u7b26\u8868\u793a\u8def\u5f84\u524d\u7f00\u3001\u540e\u7f00\u6216\u6574\u4e2a\u5b57\u7b26\u4e32\u3002\u50cf\u4e0b\u4f8b\u4e2d\u90a3\u6837\u4f7f\u7528\u661f\u53f7 (\\\\*) \u53ef\u5339\u914d\u6240\u6709\u6293\u53d6\u5de5\u5177\uff08\u5404\u79cd AdsBot \u6293\u53d6\u5de5\u5177\u9664\u5916\uff0c\u6b64\u7c7b\u6293\u53d6\u5de5\u5177\u5fc5\u987b\u660e\u786e\u6307\u5b9a\uff09\u3002\uff08\u67e5\u770b Google \u6293\u53d6\u5de5\u5177\u540d\u79f0\u5217\u8868\u3002\uff09\\n```\\n# Block all but AdsBot crawlers\\nUser-agent: *\\n```\\n> * Disallow\uff1a[\u6bcf\u6761\u89c4\u5219\u9700\u8981\u81f3\u5c11\u4e00\u4e2a\u6216\u591a\u4e2a Disallow \u6216 Allow \u6761\u76ee] \u7528\u6237\u4ee3\u7406\u4e0d\u5e94\u6293\u53d6\u7684\u76ee\u5f55\u6216\u7f51\u9875\uff08\u4ee5\u76f8\u5bf9\u4e8e\u6839\u7f51\u57df\u7684\u8def\u5f84\u8868\u793a\uff09\u3002\u5982\u679c\u8981\u6307\u5b9a\u7f51\u9875\uff0c\u5c31\u5e94\u63d0\u4f9b\u6d4f\u89c8\u5668\u4e2d\u663e\u793a\u7684\u5b8c\u6574\u7f51\u9875\u540d\u79f0\uff1b\u5982\u679c\u8981\u6307\u5b9a\u76ee\u5f55\uff0c\u5219\u5e94\u4ee5 / \u6807\u8bb0\u7ed3\u5c3e\u3002\u652f\u6301\u4f7f\u7528\u661f\u53f7 (\\\\*) \u901a\u914d\u7b26\u8868\u793a\u8def\u5f84\u524d\u7f00\u3001\u540e\u7f00\u6216\u6574\u4e2a\u5b57\u7b26\u4e32\u3002\\n> * Allow\uff1a[\u6bcf\u6761\u89c4\u5219\u9700\u8981\u81f3\u5c11\u4e00\u4e2a\u6216\u591a\u4e2a Disallow \u6216 Allow \u6761\u76ee] \u4e0a\u6587\u4e2d\u63d0\u5230\u7684\u7528\u6237\u4ee3\u7406\u5e94\u6293\u53d6\u7684\u76ee\u5f55\u6216\u7f51\u9875\uff08\u4ee5\u76f8\u5bf9\u4e8e\u6839\u7f51\u57df\u7684\u8def\u5f84\u8868\u793a\uff09\u3002\u6b64\u6307\u4ee4\u7528\u4e8e\u66ff\u6362 Disallow \u6307\u4ee4\uff0c\u4ece\u800c\u5141\u8bb8\u6293\u53d6\u5df2\u7981\u6b62\u8bbf\u95ee\u7684\u76ee\u5f55\u4e2d\u7684\u5b50\u76ee\u5f55\u6216\u7f51\u9875\u3002\u5982\u679c\u8981\u6307\u5b9a\u7f51\u9875\uff0c\u5c31\u5e94\u63d0\u4f9b\u6d4f\u89c8\u5668\u4e2d\u663e\u793a\u7684\u5b8c\u6574\u7f51\u9875\u540d\u79f0\uff1b\u5982\u679c\u8981\u6307\u5b9a\u76ee\u5f55\uff0c\u5219\u5e94\u4ee5 / \u6807\u8bb0\u7ed3\u5c3e\u3002\u652f\u6301\u4f7f\u7528\u661f\u53f7 (\\\\*) \u901a\u914d\u7b26\u8868\u793a\u8def\u5f84\u524d\u7f00\u3001\u540e\u7f00\u6216\u6574\u4e2a\u5b57\u7b26\u4e32\u3002\\n\\n> * Sitemap\uff1a[\u53ef\u9009\uff0c\u6bcf\u4e2a\u6587\u4ef6\u53ef\u5305\u542b\u96f6\u4e2a\u6216\u591a\u4e2a] \u76f8\u5e94\u7f51\u7ad9\u7684\u7ad9\u70b9\u5730\u56fe\u7684\u4f4d\u7f6e\u3002\u6b64\u884c\u4e0d\u662f\u5fc5\u9700\u7684\uff0c\u60a8\u53ef\u914c\u60c5\u6307\u5b9a\u591a\u4e2a\u7ad9\u70b9\u5730\u56fe\uff0c\u5e76\u4f7f\u7528\u6362\u884c\u7b26\u5206\u9694\u5404\u4e2a\u7ad9\u70b9\u5730\u56fe\u3002\u7ad9\u70b9\u5730\u56fe\u662f\u4e00\u79cd\u7528\u4e8e\u6307\u793a Google \u5e94\u6293\u53d6\u54ea\u4e9b\u5185\u5bb9\u7684\u7406\u60f3\u65b9\u5f0f\uff0c\u4f46\u5e76\u4e0d\u7528\u4e8e\u6307\u793a Google \u53ef\u4ee5\u6293\u53d6\u6216\u4e0d\u80fd\u6293\u53d6\u54ea\u4e9b\u5185\u5bb9\u3002\u8be6\u7ec6\u4e86\u89e3\u7ad9\u70b9\u5730\u56fe\u3002\\n\\n### \u6709\u6548\u6027\u6d4b\u8bd5\\n\u53d1\u5e03\u540e\u53ef\u4f7f\u7528\u5b98\u65b9\u63d0\u4f9b\u7684[\u5de5\u5177](https://support.google.com/webmasters/answer/6062598?hl=zh-Hans&ref_topic=6061961)\u8fdb\u884c\u6d4b\u8bd5\u3002\\n\\n\u5b9e\u9645\u6548\u679c\u5982\u4e0b\uff1a\\n![](/images/google-robots.png)\\n\\n### \u53c2\u8003\u94fe\u63a5\\n1. [Google\u5b98\u65b9\u6587\u6863](https://support.google.com/webmasters/answer/6062596?hl=zh-Hans&ref_topic=6061961)"},{"id":"/webpack-profile-stats","metadata":{"permalink":"/blog/webpack-profile-stats","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/webpack-profile-stats.md","source":"@site/blog/webpack-profile-stats.md","title":"webpack profile \u6587\u4ef6\u5206\u6790\u529f\u80fd","description":"","date":"2018-07-25T10:27:47.000Z","formattedDate":"2018\u5e747\u670825\u65e5","tags":[],"readingTime":0,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"webpack profile \u6587\u4ef6\u5206\u6790\u529f\u80fd","comments":true,"date":"2018-07-25T10:27:47.000Z","updated":"2018-07-25T10:27:47.000Z"},"prevItem":{"title":"Google Robots","permalink":"/blog/google-robots"},"nextItem":{"title":"Sublime Text \u5b9e\u7528\u63d2\u4ef6","permalink":"/blog/sublime-text-plugins"}},"content":""},{"id":"/sublime-text-plugins","metadata":{"permalink":"/blog/sublime-text-plugins","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/sublime-text-plugins.md","source":"@site/blog/sublime-text-plugins.md","title":"Sublime Text \u5b9e\u7528\u63d2\u4ef6","description":"\u672c\u6587\u662f\u5bf9 Sublime Text \u7f16\u8f91\u5668\u4e00\u4e9b\u5b9e\u7528\u63d2\u4ef6\u7684\u603b\u7ed3\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u3002","date":"2018-05-21T19:04:05.000Z","formattedDate":"2018\u5e745\u670821\u65e5","tags":[{"label":"Sublime Text","permalink":"/blog/tags/sublime-text"}],"readingTime":2.585,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Sublime Text \u5b9e\u7528\u63d2\u4ef6","comments":true,"date":"2018-05-21T19:04:05.000Z","updated":"2018-05-21T19:04:05.000Z","tags":["Sublime Text"],"categories":["Editor"]},"prevItem":{"title":"webpack profile \u6587\u4ef6\u5206\u6790\u529f\u80fd","permalink":"/blog/webpack-profile-stats"},"nextItem":{"title":"Node API - URL","permalink":"/blog/node-url"}},"content":"\u672c\u6587\u662f\u5bf9 Sublime Text \u7f16\u8f91\u5668\u4e00\u4e9b\u5b9e\u7528\u63d2\u4ef6\u7684\u603b\u7ed3\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u8bf4\u660e\\n\u60f3\u88c5\u63d2\u4ef6\uff0c\u8bf7\u5148\u5f00\u542f `Package Control`, \u7f51\u4e0a\u6559\u7a0b\u5f88\u591a\uff0c\u672c\u6587\u4e0d\u505a\u8d58\u8ff0\u3002\\n\\n\\n\u6240\u6709\u652f\u6301\u7684\u63d2\u4ef6\u53ef\u4ee5\u4ece[packagecontrol.io](https://packagecontrol.io/)\u4e0a\u627e\u5230\u3002\\n\\n## Sync Settings -- \u914d\u7f6e\u4e91\u540c\u6b65\\n\u6700\u7b80\u5355\u7684\u3001\u7701\u4e8b\u513f\u3001\u5b89\u5168\u7684\u65b9\u6cd5\u5f53\u7136\u662f\u201c\u62ff\u6765\u4e3b\u4e49\u201d\u4e86\u3002\u8fd9\u4e2a\u63d2\u4ef6\u53ef\u4ee5\u5c06\u4f60\u7684\u914d\u7f6e\u4e0a\u4f20\u5230[`Gist`](https://gist.github.com/)\u4e0a\uff0c\u4e5f\u53ef\u4ee5\u5c06`Gist`\u4e0a\u7684\u914d\u7f6e\u540c\u6b65\u5230\u672c\u5730\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u83b7\u53d6\u522b\u4eba\u5206\u4eab\u7684\u914d\u7f6e\u3002\u6ce8\u610f\u8fd9\u4e9b\u914d\u7f6e\u5305\u62ec\u4e86\u63d2\u4ef6\u3001\u5feb\u6377\u952e\u3001\u4e2a\u6027\u5316\u914d\u7f6e\u7b49\u3002\\n\\n## SideBarEnhancements -- \u4fa7\u8fb9\u680f\u589e\u5f3a\\n\u9ed8\u8ba4\u7684\u4fa7\u8fb9\u680f\u529f\u80fd\u6781\u7b80\uff0c\u4f7f\u7528\u8be5\u63d2\u4ef6\u5e94\u8be5\u80fd\u6ee1\u8db3\u9700\u6c42\u3002\\n\\n![](/images/sublime/sidebar.png)\\n\\n## SublimeCodeIntel -- \u4ee3\u7801\u63d0\u793a\\n\u8fd9\u4e2a\u5c31\u4e0d\u7528\u8bf4\u4e86\u5427\uff0c\u6548\u7387\u5fc5\u5907\u3002\\n\\n## SublimeLinter -- \u4ee3\u7801\u6821\u9a8c\\n\u914d\u5408\u4ee5\u4e0b\u4e24\u4e2a\u63d2\u4ef6\uff0c\u53ef\u4ee5\u5bf9\u6587\u4ef6\u8fdb\u884c `Eslint` \u89c4\u5219\u6821\u9a8c\uff0c\u8ba9\u4ee3\u7801\u66f4\u6f02\u4eae\u3001\u98ce\u683c\u66f4\u7edf\u4e00\u3002\\n\\n### SublimeLinter-eslint -- Eslint \u8bed\u6cd5\u6821\u9a8c\\n### SublimeLinter-json -- JSON \u68c0\u6d4b\\n\\n## ESLint-Formatter -- Eslint fix\\n\u5c06\u4e0d\u7b26\u5408\u89c4\u5219\u7684\u4ee3\u7801\u683c\u5f0f\u5316\uff0c\u4e0d\u8fc7\uff0c\u53ea\u80fd\u683c\u5f0f\u5316\u7b80\u5355\u7684\u89c4\u5219\uff0c\u5982\u6807\u70b9\u7b26\u53f7\u3002\\n\\n## Git\\n\u5e94\u8be5\u8981\u88c5\u5427\u3002\\n\\n## Git\u200bGutter -- \u663e\u793agit\u4fe1\u606f\\n\u770b\u56fe\uff1a\\n\\n![](/images/sublime/gitgutter1.gif)\\n\\n![](/images/sublime/gitgutter2.gif)\\n\\n\\n## Git blame -- Git \u5386\u53f2\u95ee\u8d23\\n`vscode` \u4e0a\u6709\u4e2a`Gitlens`\uff0c\u53ef\u4ee5\u5728\u6bcf\u884c\u4ee3\u7801\u4e0a\u663e\u793a\u4e0a\u4e00\u6b21\u7684`Git`\u63d0\u4ea4\u8bb0\u5f55\u3002`Sublime Text` \u4e0a\u7684 `Git blame` \u540c\u6837\u53ef\u4ee5\u5b9e\u73b0\u6b64\u529f\u80fd\u3002\u4ee3\u7801\u8d23\u4efb\u5230\u884c\uff0c\u4ece\u6b64\uff0c\u4e0d\u7528\u62c5\u5fc3\u7529\u9505\uff08\u5f53\u7136\u5566\uff0c\u53ef\u4ee5\u67e5\u770b\u5177\u4f53\u7684\u6587\u4ef6commit history\uff09\u3002\u8be5\u63d2\u4ef6\u63d0\u4f9b\u4e86\u5feb\u901f\u67e5\u770b\u67d0\u884c\u6216\u67d0\u6587\u4ef6\u4e0a\u6b21\u4fee\u6539\u5386\u53f2\u8bb0\u5f55\u7684\u529f\u80fd\uff0c\u5341\u5206\u65b9\u4fbf\u3002\\n\\n## Color Highlighter -- \u989c\u8272\u9ad8\u4eae\\n\\n![](/images/sublime/colorhighlighte.png)\\n\\n## Case Conversion -- \u683c\u5f0f\u8f6c\u6362\\n\u5c06\u9009\u4e2d\u6587\u672c\u8f6c\u6362\u6210\u76ee\u6807\u683c\u5f0f\uff0c\u5982 `snake_case`, `SCREAMING_SNAKE_CASE`, `camelCase`, `PascalCase`, `dot.case`\u7b49\u3002\\n\\n## DocBlockr -- \u6dfb\u52a0\u6ce8\u91ca\\n\\n![](/images/sublime/docblockr.gif)\\n\\n## \u4e3b\u9898\u914d\u8272\\n### Spacegray\\n1. \u767d\u8272\\n\\n\\t![](/images/sublime/spacegray1.png)\\n\\n2. \u9ed1\u8272\\n\\n\\t![](/images/sublime/spacegray2.png)\\n\\n### Material\\n\\n![](/images/sublime/material.gif)\\n\\n## \u7ed3\u8bed\\n\u8be6\u7ec6\u5b89\u88c5\u4f7f\u7528\u6559\u7a0b\u90fd\u53ef\u4ee5\u5728 [packagecontrol.io](https://packagecontrol.io/) \u4e0a\u627e\u5230\uff0c\u4ee5\u4e0a\u90e8\u5206\u622a\u56fe\u4e5f\u662f\u53d6\u81ea\u5b98\u65b9\u6587\u6863\u3002\u6682\u65f6\u5148\u8bb0\u5f55\u5230\u8fd9\u91cc\u5427\u3002"},{"id":"/node-url","metadata":{"permalink":"/blog/node-url","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/node-url.md","source":"@site/blog/node-url.md","title":"Node API - URL","description":"URL \u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217 url \u89e3\u6790\u548c\u5904\u7406\u65b9\u6cd5\u3002","date":"2018-05-15T09:33:10.000Z","formattedDate":"2018\u5e745\u670815\u65e5","tags":[{"label":"node","permalink":"/blog/tags/node"}],"readingTime":2.385,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Node API - URL","comments":true,"date":"2018-05-15T09:33:10.000Z","updated":"2018-05-15T09:33:10.000Z","tags":["node"],"categories":null},"prevItem":{"title":"Sublime Text \u5b9e\u7528\u63d2\u4ef6","permalink":"/blog/sublime-text-plugins"},"nextItem":{"title":"\u767d\u7528\u4e86\u90a3\u4e48\u591a\u5e74\u7684 \u2018oh-my-zsh\u2019 -- Plugins","permalink":"/blog/zsh"}},"content":"`URL` \u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217 url \u89e3\u6790\u548c\u5904\u7406\u65b9\u6cd5\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n\u8bf4\u660e\uff1a\u672c\u6587\u662f\u57fa\u4e8e node@9.3.0 \u6574\u7406\u3002 \u67e5\u770b[\u5b98\u65b9\u6587\u6863](https://nodejs.org/docs/v9.3.0/api/url.html)\\n\\n## \u4e24\u79cd\u5b9e\u8df5\\nNode `url` \u6709\u4e24\u79cd\u5b9e\u73b0\u5b9e\u8df5\u5f62\u5f0f\u3002\\n\\n### \u4e00. WHATWG URL \u6807\u51c6\\n\u5728 WHATWG \u6807\u51c6\u89c4\u8303\u4e2d\u5b9a\u4e49\u4e86\u4e00\u4e2a `URL` \u7c7b\uff0c`new` \u51fa\u4e00\u4e2a\u793a\u4f8b\u540e\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u4e00\u7cfb\u5217\u89e3\u6790\u503c\u3002\u5982\u4e0b\uff1a\\n\\n```js\\nconst { URL } = require(\'url\');\\nconst parsedUrl = new URL(\'https://user:pass@sub.host.com:8080/p/a/t/h?query=string#hash\');\\n```\\n\\n1. \u5c5e\u6027\\n\\n  \u5f97\u5230\u7684 `parsedUrl` \u5bf9\u8c61\u5982\u4e0b\uff1a\\n  ```node\\n  {\\n    href: \'https://user:pass@sub.host.com:8080/p/a/t/h?query=string#hash\',\\n    origin: \'https://sub.host.com:8080\',\\n    protocol: \'https:\',\\n    username: \'user\',\\n    password: \'pass\',\\n    host: \'sub.host.com:8080\',\\n    hostname: \'sub.host.com\',\\n    port: \'8080\',\\n    pathname: \'/p/a/t/h\',\\n    search: \'?query=string\',\\n    searchParams: URLSearchParams { \'query\' => \'string\' },\\n    hash: \'#hash\'\\n  }\\n  ```\\n\\n  \u4e0a\u9762\u8fd9\u4e9b\u5c5e\u6027\u90fd\u53ef\u4ee5\u901a\u8fc7setter\u7684\u65b9\u5f0f\u8d4b\u503c\u6539\u5199\uff0c\u5982\uff1a\\n\\n  ```js\\n  const { URL } = require(\'url\');\\n  const myURL = new URL(\'https://example.org\');\\n  console.log(myURL.protocol);\\n  // Prints https:\\n\\n  myURL.protocol = \'ftp\';\\n  console.log(myURL.href);\\n  // Prints ftp://example.org/\\n  ```\\n\\n2. \u65b9\u6cd5\\n  + url.format(url[, options])\\n\\n  + url.domainToUnicode(domain)\\n\\n  + url.domainToASCII(domain)\\n\\n### \u4e8c. Node \u81ea\u5b9e\u73b0\\n```js\\nconst url = require(\'url\')\\nconst parsedUrl = url.parse(\'https://user:pass@sub.host.com:8080/p/a/t/h?query=string#hash\')\\n```\\n\\n\u89e3\u6790\u7ed3\u679c\u5982\u4e0b\uff1a\\n```js\\n{\\n  protocol: \'https:\',\\n  slashes: true,\\n  auth: \'user:pass\',\\n  host: \'sub.host.com:8080\',\\n  port: \'8080\',\\n  hostname: \'sub.host.com\',\\n  hash: \'#hash\',\\n  search: \'?query=string\',\\n  query: \'query=string\',\\n  pathname: \'/p/a/t/h\',\\n  path: \'/p/a/t/h?query=string\',\\n  href: \'https://user:pass@sub.host.com:8080/p/a/t/h?query=string#hash\'\\n}\\n```\\n\\n1. urlObject \u5bf9\u8c61\\n`url.parse` \u65b9\u6cd5\u89e3\u6790\u540e\u4f1a\u8fd4\u56de\u4e00\u4e2a `urlObject` \u5bf9\u8c61\uff0c\u5bf9\u8c61\u4e0a\u5373\u5b58\u5728\u4f17\u591a\u89e3\u6790\u5f97\u5230\u7684\u5c5e\u6027\u503c\uff0c\u793a\u4f8b\u5982\u4e0a\u6240\u793a\u3002\\n\\n2. \u65b9\u6cd5\\n  + url.format(urlObject)\\n\\n  + url.parse(urlString[, parseQueryString[, slashesDenoteHost]])\\n\\n  + url.resolve(from, to)\\n\\n\\n## URLSearchParams \u7c7b\\n\u4e3b\u8981\u7528\u4e8e\u5904\u7406 `query` \u5b57\u7b26\u4e32\u3002\\n\\n### \u7b80\u5355\u793a\u4f8b\\n\u53c2\u6570\u53ef\u4ee5\u662f `string`\u3001`object`\u3001`iterable`\u3002\u7b80\u8981\u793a\u4f8b\u5982\u4e0b\uff0c\u5177\u4f53\u53ef\u4ee5\u67e5\u770b\u6587\u6863\u3002\\n\\n```js\\n// string\\nconst { URLSearchParams } = require(\'url\');\\nlet params;\\n\\nparams = new URLSearchParams(\'user=abc&query=xyz\');\\nconsole.log(params.get(\'user\'));\\n// Prints \'abc\'\\nconsole.log(params.toString());\\n// Prints \'user=abc&query=xyz\'\\n```\\n\\n\u6ce8\u610f\uff1a\u53c2\u6570\u4e2d\u7684 `?` \u4f1a\u88ab\u5ffd\u7565\u3002\\n\\n\\n```js\\n// object\\nconst { URLSearchParams } = require(\'url\');\\nconst params = new URLSearchParams({\\n  user: \'abc\',\\n  query: [\'first\', \'second\']\\n});\\nconsole.log(params.getAll(\'query\'));\\n// Prints [ \'first,second\' ]\\nconsole.log(params.toString());\\n// Prints \'user=abc&query=first%2Csecond\'\\n// ...\\n```\\n\\n```js\\nparams = new URLSearchParams([\\n  [\'user\', \'abc\'],\\n  [\'query\', \'first\'],\\n  [\'query\', \'second\']\\n]);\\nconsole.log(params.toString());\\n// Prints \'user=abc&query=first&query=second\'\\n// ...\\n```\\n\\n### \u4e00\u4e9b\u65b9\u6cd5\\n\u8fd4\u56de\u7684\u5bf9\u8c61\u5177\u6709\u901a\u884c\u7684 ES6 \u5bf9\u8c61\u65b9\u6cd5\uff0c`toString`\\n\\n1. ES6 \u5bf9\u8c61\u65b9\u6cd5\\n  `entries`\u3001`keys`\u3001`values`\\n\\n2. \u6570\u7ec4\u65b9\u6cd5\\n  `forEach`\u3001`sort`\\n\\n3. \u5176\u4ed6\\n  `set`, `get`, `getAll`, `delete`, `append`, `has`, `toString`\\n\\n## \u7ed3\u8bed\\n\u5f88\u5b9e\u7528\u7684\u5de5\u5177\u3002\u4ee5\u4e0a\u3002"},{"id":"/zsh","metadata":{"permalink":"/blog/zsh","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/zsh.md","source":"@site/blog/zsh.md","title":"\u767d\u7528\u4e86\u90a3\u4e48\u591a\u5e74\u7684 \u2018oh-my-zsh\u2019 -- Plugins","description":"\u4ee5\u524d\u867d\u7136\u7814\u7a76\u8fc7 Oh My Zsh \u7684\u4f7f\u7528\u6280\u5de7\uff0c\u4f46\u90fd\u662f\u5728\u9700\u6c42\u7684\u9a71\u52a8\u4e0b\u8fdb\u884c\u7684\u3002\u6362\u8fc7\u591a\u6b21\u4e3b\u9898\uff0c\u914d\u8fc7 Sublime Text \u548c Git \u7b49 alias\u547d\u4ee4\uff0c\u8fd8\u6709\u4e00\u4e9b\u96f6\u6563\u7684\u914d\u7f6e\u3002\u4eca\u5929\u5076\u7136\u770b\u5230\u5176\u53ef\u4ee5\u5f00\u542f web-search \u529f\u80fd\uff0c\u5341\u5206\u60ca\u559c\u548c\u597d\u5947\u3002\u6d4f\u89c8\u8fc7\u5b98\u65b9 wiki \u540e\uff0c\u624d\u53d1\u73b0\u6709\u4e00\u4e9b\u5f88\u5b9e\u7528\u7684 plugins, \u4fbf\u8bb0\u5f55\u4e0b\u6298\u817e\u8fc7\u7a0b\u5427\u3002","date":"2018-03-22T19:02:56.000Z","formattedDate":"2018\u5e743\u670822\u65e5","tags":[{"label":"Terminal","permalink":"/blog/tags/terminal"},{"label":"Tool","permalink":"/blog/tags/tool"}],"readingTime":2.81,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u767d\u7528\u4e86\u90a3\u4e48\u591a\u5e74\u7684 \u2018oh-my-zsh\u2019 -- Plugins","comments":true,"date":"2018-03-22T19:02:56.000Z","updated":"2018-03-22T19:02:56.000Z","tags":["Terminal","Tool"],"categories":["Tool"]},"prevItem":{"title":"Node API - URL","permalink":"/blog/node-url"},"nextItem":{"title":"Gogs + Docker \u642d\u5efa Git \u670d\u52a1\u5668\u5b9e\u8df5","permalink":"/blog/docker-gogs"}},"content":"\u4ee5\u524d\u867d\u7136\u7814\u7a76\u8fc7 `Oh My Zsh` \u7684\u4f7f\u7528\u6280\u5de7\uff0c\u4f46\u90fd\u662f\u5728\u9700\u6c42\u7684\u9a71\u52a8\u4e0b\u8fdb\u884c\u7684\u3002\u6362\u8fc7\u591a\u6b21\u4e3b\u9898\uff0c\u914d\u8fc7 Sublime Text \u548c Git \u7b49 alias\u547d\u4ee4\uff0c\u8fd8\u6709\u4e00\u4e9b\u96f6\u6563\u7684\u914d\u7f6e\u3002\u4eca\u5929\u5076\u7136\u770b\u5230\u5176\u53ef\u4ee5\u5f00\u542f web-search \u529f\u80fd\uff0c\u5341\u5206\u60ca\u559c\u548c\u597d\u5947\u3002\u6d4f\u89c8\u8fc7\u5b98\u65b9 wiki \u540e\uff0c\u624d\u53d1\u73b0\u6709\u4e00\u4e9b\u5f88\u5b9e\u7528\u7684 plugins, \u4fbf\u8bb0\u5f55\u4e0b\u6298\u817e\u8fc7\u7a0b\u5427\u3002\\n\x3c!--truncate--\x3e\\n\\n### \u542f\u52a8\u753b\u9762\\n\u5148\u6765\u770b\u4e00\u4e2a\u542f\u52a8\u753b\u9762\uff1a\\n\\n![](/images/zsh/fbi.png)\\n\\n\u54c8\u54c8\uff0c\u662f\u4e0d\u662f\u6709\u4e00\u79cd\u964c\u751f\u7684\u719f\u6089\u611f\uff01\\n\\n\u5982\u4f55\u914d\u7f6e\u5462\uff1f\\n\\n1. \u6253\u5f00 .zshrc \u914d\u7f6e\u6587\u4ef6\\n\\n```zsh\\nvim ~/.zshrc\\n```\\n\\n2. \u52a0\u5165\u4e00\u4e0b\u914d\u7f6e\\n\\n```zsh\\nexport PATH=\\"$PATH:$HOME/.rvm/bin\\" # Add RVM to PATH for scripting\\n\\n_COLUMNS=$(tput cols)\\n_MESSAGE=\\" FBI Warining \\"\\ny=$(( ( $_COLUMNS - ${#_MESSAGE} )  / 2 ))\\nspaces=$(printf \\"%-${y}s\\" \\" \\")\\n\\necho \\" \\"\\necho -e \\"${spaces}\\\\033[41;37;5m FBI WARNING \\\\033[0m\\"\\necho \\" \\"\\n_COLUMNS=$(tput cols)\\n_MESSAGE=\\"Ferderal Law provides severe civil and criminal penalties for\\"\\ny=$(( ( $_COLUMNS - ${#_MESSAGE} )  / 2 ))\\nspaces=$(printf \\"%-${y}s\\" \\" \\")\\necho -e \\"${spaces}${_MESSAGE}\\"\\n\\n_COLUMNS=$(tput cols)\\n_MESSAGE=\\"the unauthorized reproduction, distribution, or exhibition of\\"\\ny=$(( ( $_COLUMNS - ${#_MESSAGE} )  / 2 ))\\nspaces=$(printf \\"%-${y}s\\" \\" \\")\\necho -e \\"${spaces}${_MESSAGE}\\"\\n\\n_COLUMNS=$(tput cols)\\n_MESSAGE=\\"copyrighted motion pictures (Title 17, United States Code,\\"\\ny=$(( ( $_COLUMNS - ${#_MESSAGE} )  / 2 ))\\nspaces=$(printf \\"%-${y}s\\" \\" \\")\\necho -e \\"${spaces}${_MESSAGE}\\"\\n\\n_COLUMNS=$(tput cols)\\n_MESSAGE=\\"Sections 501 and 508). The Federal Bureau of Investigation\\"\\ny=$(( ( $_COLUMNS - ${#_MESSAGE} )  / 2 ))\\nspaces=$(printf \\"%-${y}s\\" \\" \\")\\necho -e \\"${spaces}${_MESSAGE}\\"\\n\\n_COLUMNS=$(tput cols)\\n_MESSAGE=\\"investigates allegations of criminal copyright infringement\\"\\ny=$(( ( $_COLUMNS - ${#_MESSAGE} )  / 2 ))\\nspaces=$(printf \\"%-${y}s\\" \\" \\")\\necho -e \\"${spaces}${_MESSAGE}\\"\\n\\n_COLUMNS=$(tput cols)\\n_MESSAGE=\\"(Title 17, United States Code, Section 506).\\"\\ny=$(( ( $_COLUMNS - ${#_MESSAGE} )  / 2 ))\\nspaces=$(printf \\"%-${y}s\\" \\" \\")\\necho -e \\"${spaces}${_MESSAGE}\\"\\necho \\" \\"\\n```\\n\\n3. \u5e94\u7528\u751f\u6548\\n\u6267\u884c\u547d\u4ee4\uff1a\\n\\n```zsh\\nsource ~/.zshrc\\n```\\n\\n\u6253\u5f00\u65b0\u7684 shell \u5373\u53ef\u770b\u5230\u542f\u52a8\u52a8\u753b\u4e86\u3002\\n\\n\\n### \u6dfb\u52a0 Plugins\\n\\nOh My Zsh \u5185\u7f6e\u4e86\u8bb8\u591a Plugins, \u76f4\u63a5\u6dfb\u52a0\u914d\u7f6e\u5373\u53ef\u3002\\n\\n\u4fee\u6539 `~/.zshrc` \u91cc\u7684 plugin \u5c5e\u6027\uff0c\u5176\u9ed8\u8ba4\u503c\u5982\u4e0b\uff1a\\n\\n```zsh\\nplugins=(git)\\n```\\n\\n\u53ea\u9700\u8981\u5728\u62ec\u53f7\u91cc\u4ee5\u7a7a\u683c\u9694\u5f00\u6dfb\u52a0 plugin \u540d\u5373\u53ef\uff0c\u5982\\n\\n```zsh\\nplugins=(git sublime web-search docker encode64 npm yarn node)\\n```\\n\\n\u9ed8\u8ba4\u652f\u6301\u7684 plugins \u53ef\u4ee5\u67e5\u770b [\u5b98\u65b9wiki](https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins)\uff0c\u63cf\u8ff0\u5f88\u8be6\u7ec6\u3002\\n\\n\u5176\u4e2d\uff0c `web-search` \u6dfb\u52a0\u4e86\u51e0\u79cd\u641c\u7d22\u547d\u4ee4\uff0c\u5982 google, bing, baidu, github \u7b49, \u652f\u6301\u4ece\u7ec8\u7aef\u8fdb\u884c\u641c\u7d22\uff0c\u5982\uff1a\\n\\n```zsh\\ngoogle oh my zsh \u662f\u4e2a\u5565\\n```\\n\\n\u6267\u884c\u8be5\u547d\u4ee4\uff0c\u4f1a\u81ea\u52a8\u6253\u5f00\u6d4f\u89c8\u5668\u5e76\u641c\u7d22\u76ee\u6807\u3002\\n\\n\\n### \u7ed3\u8bed\\n\u4fdd\u6301\u597d\u5947\uff0c\u603b\u4f1a\u53d1\u73b0\u8bb8\u591a\u6709\u610f\u601d\u7684\u4e1c\u897f\uff0c\u81f3\u4e8e\u5176\u4f5c\u7528\uff0c\u5df2\u7ecf\u4e0d\u91cd\u8981\u4e86\u3002\u6bd5\u7adf\uff0c\u6211\u4eec\u5df2\u7ecf\u6536\u83b7\u4e86\u63a2\u7d22\u7684\u4e50\u8da3\uff01"},{"id":"/docker-gogs","metadata":{"permalink":"/blog/docker-gogs","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/docker-gogs.md","source":"@site/blog/docker-gogs.md","title":"Gogs + Docker \u642d\u5efa Git \u670d\u52a1\u5668\u5b9e\u8df5","description":"\u672c\u6587\u662f\u7528 Gogs Docker \u955c\u50cf\u5feb\u901f\u642d\u5efa\u81ea\u5df1\u7684 Git \u670d\u52a1\u5668\u5b9e\u8df5\u8bb0\u5f55\u3002","date":"2018-03-07T12:59:00.000Z","formattedDate":"2018\u5e743\u67087\u65e5","tags":[{"label":"git","permalink":"/blog/tags/git"},{"label":"docker","permalink":"/blog/tags/docker"}],"readingTime":1.475,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Gogs + Docker \u642d\u5efa Git \u670d\u52a1\u5668\u5b9e\u8df5","comments":true,"date":"2018-03-07T12:59:00.000Z","updated":"2018-03-07T12:59:00.000Z","tags":["git","docker"],"categories":null},"prevItem":{"title":"\u767d\u7528\u4e86\u90a3\u4e48\u591a\u5e74\u7684 \u2018oh-my-zsh\u2019 -- Plugins","permalink":"/blog/zsh"},"nextItem":{"title":"parcel-vue\u73af\u5883\u4e0bpug\u652f\u6301\u5b9e\u8df5","permalink":"/blog/parcel-vue-pug"}},"content":"\u672c\u6587\u662f\u7528 Gogs Docker \u955c\u50cf\u5feb\u901f\u642d\u5efa\u81ea\u5df1\u7684 Git \u670d\u52a1\u5668\u5b9e\u8df5\u8bb0\u5f55\u3002\\n\\n\x3c!--truncate--\x3e\\n### \u57fa\u672c\u8bf4\u660e\\n\u6b64\u6b21\u5b9e\u8df5\u4ee5 `Docker` \u4e3a\u4e3b\uff0c\u4ee5 `systemd` \u5b88\u62a4\u8fdb\u7a0b\u3002\\n\\n\u76f8\u5173\u6587\u6863\\n* [Docker for Gogs](https://github.com/gogits/gogs/tree/master/docker)\\n* [Gogs\u5b98\u65b9\u6587\u6863](https://gogs.io/docs/)\\n* [Docker\u5b98\u65b9\u6587\u6863](https://docs.docker.com/)\\n\\n### \u5b89\u88c5\\n#### \u62c9\u53d6\u955c\u50cf\\n```bash\\ndocker pull gogs/gogs\\n```\\n\\n#### \u521b\u5efa\u672c\u5730\u8d44\u6e90\u6587\u4ef6\\n```bash\\nmkdir -p /var/gogs\\n```\\n\\n#### \u914d\u7f6e service \u6587\u4ef6\\n```\\n[Unit]\\nDescription=gogs service\\nAfter=docker.service\\nRequires=docker.service\\n[Service]\\nTimeoutStartSec=0\\nRestart=always\\nExecStartPre=-/usr/bin/docker rm gogs\\nExecStart=/usr/bin/docker run \\\\\\n   --name gogs \\\\\\n   -v /var/gogs:/data/ \\\\\\n   -p 10022:22 \\\\\\n   -p 10080:3000 \\\\\\n   gogs/gogs\\n\\nExecStop=/usr/bin/docker kill gogs\\n[Install]\\nWantedBy=multi-user.target\\n```\\n\\n#### \u542f\u52a8\u670d\u52a1\\n```bash\\nsystemctl start gogs\\n```\\n\\n\u81f3\u6b64\uff0c\u5b89\u88c5\u542f\u52a8\u5b8c\u6210\uff0c\u8bbf\u95ee 10080 \u7aef\u53e3\u5373\u53ef\uff01\\n\\n### \u914d\u7f6e\\n\u8bbf\u95ee `http://ip:port` \u914d\u7f6egogs\u670d\u52a1\u3002\\n\\n\u4e3b\u8981\u662f\u914d\u7f6e `\u6570\u636e\u5e93`\u3001`\u57df\u540d`\u3001`\u5e94\u7528\u5730\u5740`\u3002\u6839\u636e\u4e2a\u4eba\u60c5\u51b5\u914d\u7f6e\u5982\u4e0b\uff0c\u5176\u4ed6\u9ed8\u8ba4\uff1a\\n\u6570\u636e\u5e93\uff1aSQLite3\\n\u57df\u540d\uff1agit.p2yang.com\\n\u5e94\u7528\u5730\u5740\uff1ahttp://git.p2yang.com\\n\\n\u8bbf\u95ee git.p2yang.com:10080\uff0c \u7ed3\u679c\u5982\u56fe\u6240\u793a\\n![gogs](/images/gogs.png)\\n\\n### \u914d\u7f6enginx\u53cd\u5411\u4ee3\u7406\\nnginx \u589e\u52a0\u914d\u7f6e\u5982\u4e0b\uff1a\\n```\\nserver {\\n    server_name git.p2yang.com\\n    listen 80;\\n\\n    location / {\\n        proxy_pass http://139.196.54.203:10080;\\n        proxy_set_header Host $host:80;\\n        proxy_set_header X-Real-IP $remote_addr;\\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\\n    }\\n}\\n```\\n\u76d1\u542c`80`\u7aef\u53e3\uff0c\u4ee3\u7406\u5230\u670d\u52a1\u5668`10080`\u7aef\u53e3\u3002\\n* \u6ce8\u610f\uff1a\u5982\u679c\u662f`nginx + docker` \u5bb9\u5668\u8d77\u7684\u670d\u52a1\uff0c\u6b64\u5904 `proxy_pass` \u7684\u503c\u987b\u91c7\u7528`ip`.\\n\\n### \u5907\u4efd\\n\u5b9e\u73b0\u4e2d..."},{"id":"/parcel-vue-pug","metadata":{"permalink":"/blog/parcel-vue-pug","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/parcel-vue-pug.md","source":"@site/blog/parcel-vue-pug.md","title":"parcel-vue\u73af\u5883\u4e0bpug\u652f\u6301\u5b9e\u8df5","description":"parcel-plugin-vue \u63d2\u4ef6\u9ed8\u8ba4\u6ca1\u6709\u5b9e\u73b0\u6b64\u529f\u80fd\uff0c\u9700\u8981\u6211\u4eec\u81ea\u5df1\u5199\u914d\u7f6e\u3002\u5176\u9ed8\u8ba4\u8f6c\u6362\u5de5\u5177\u662f vueify, \u6839\u636e\u6587\u6863\u8d44\u6599\uff0c\u672c\u6587\u8bb0\u5f55\u4e0b\u5b9e\u73b0 pug \u652f\u6301\u7684\u57fa\u672c\u6b65\u9aa4\u3002","date":"2018-01-30T09:18:42.000Z","formattedDate":"2018\u5e741\u670830\u65e5","tags":[{"label":"parcel","permalink":"/blog/tags/parcel"},{"label":"vue","permalink":"/blog/tags/vue"}],"readingTime":0.915,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"parcel-vue\u73af\u5883\u4e0bpug\u652f\u6301\u5b9e\u8df5","comments":true,"date":"2018-01-30T09:18:42.000Z","updated":"2018-01-30T09:18:42.000Z","tags":["parcel","vue"],"categories":null},"prevItem":{"title":"Gogs + Docker \u642d\u5efa Git \u670d\u52a1\u5668\u5b9e\u8df5","permalink":"/blog/docker-gogs"},"nextItem":{"title":"Parcel \u5f00\u542f\u4e09\u5927CSS\u9884\u5904\u7406\u5668--Stylus/Less/Sass","permalink":"/blog/parcel-step-2"}},"content":"`parcel-plugin-vue` \u63d2\u4ef6\u9ed8\u8ba4\u6ca1\u6709\u5b9e\u73b0\u6b64\u529f\u80fd\uff0c\u9700\u8981\u6211\u4eec\u81ea\u5df1\u5199\u914d\u7f6e\u3002\u5176\u9ed8\u8ba4\u8f6c\u6362\u5de5\u5177\u662f `vueify`, \u6839\u636e\u6587\u6863\u8d44\u6599\uff0c\u672c\u6587\u8bb0\u5f55\u4e0b\u5b9e\u73b0 pug \u652f\u6301\u7684\u57fa\u672c\u6b65\u9aa4\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u6dfb\u52a0\u914d\u7f6e\u6587\u4ef6 ***vue.config.js***\\n\u5728\u6839\u76ee\u5f55\u4e0b\u65b0\u5efa\u914d\u7f6e\u6587\u4ef6 ***vue.config.js***\uff0c\u6dfb\u52a0pug\u89e3\u6790\u65b9\u6cd5\uff0c\u5177\u4f53\u5982\u4e0b\uff1a\\n\\n```js\\n// vue.config.js\\nconst pug = require(\'pug\')\\n\\nmodule.exports = {\\n    customCompilers: {\\n        pug (content, cb) {\\n            const html = pug.render(content)\\n            cb(null, html)\\n        }\\n    }\\n}\\n```\\n\\n> \u5177\u4f53\u914d\u7f6e\u8bf4\u660e\u8bf7\u67e5\u770b[\u6587\u6863](https://github.com/vuejs/vueify#configuring-options).\\n\\n## \u6dfb\u52a0\u4f9d\u8d56 `pug`\\n\u9700\u8981 `pug` \u6765\u89e3\u6790, \u6240\u4ee5\u6dfb\u52a0\\n```bash\\nyarn add pug --dev\\n```\\n\\n## \u4f7f\u7528pug\u8bed\u6cd5\\n\u73b0\u5728\u5c31\u53ef\u4ee5\u5728\u3002vue\u6587\u4ef6\u4e2d\u4e66\u5199pug\u8bed\u6cd5\u4e86\u3002\\n```vue\\n<template lang=\\"pug\\">\\n  h1 parcel vue\\n</template>\\n// ...\\n```\\n\\n--\\n\u5230\u6b64\uff0c\u5927\u529f\u544a\u6210\uff01"},{"id":"/parcel-step-2","metadata":{"permalink":"/blog/parcel-step-2","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/parcel-step-2.md","source":"@site/blog/parcel-step-2.md","title":"Parcel \u5f00\u542f\u4e09\u5927CSS\u9884\u5904\u7406\u5668--Stylus/Less/Sass","description":"Parcel \u9ed8\u8ba4\u652f\u6301 Stylus/Less/Sass, \u53ea\u4e0d\u8fc7\u9700\u8981\u5b89\u88c5\u5bf9\u5e94\u7684npm\u4f9d\u8d56\u3002\u5b98\u65b9\u6587\u6863\u8a00\u8bed\u6a21\u7cca\uff0c\u6211\u4eec\u8fd9\u91cc\u4fbf\u6765\u5b9e\u8df5\u4e00\u4e0b\u5177\u4f53\u5982\u4f55\u5f00\u542ftylus/Less/Sass\u3002","date":"2018-01-26T19:59:28.000Z","formattedDate":"2018\u5e741\u670826\u65e5","tags":[{"label":"parcel","permalink":"/blog/tags/parcel"},{"label":"vue","permalink":"/blog/tags/vue"},{"label":"css","permalink":"/blog/tags/css"}],"readingTime":1.5,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Parcel \u5f00\u542f\u4e09\u5927CSS\u9884\u5904\u7406\u5668--Stylus/Less/Sass","comments":true,"date":"2018-01-26T19:59:28.000Z","updated":"2018-01-26T19:59:28.000Z","tags":["parcel","vue","css"],"categories":null},"prevItem":{"title":"parcel-vue\u73af\u5883\u4e0bpug\u652f\u6301\u5b9e\u8df5","permalink":"/blog/parcel-vue-pug"},"nextItem":{"title":"Parcel + Vue \u5c1d\u9c9c","permalink":"/blog/parcel-vue"}},"content":"Parcel \u9ed8\u8ba4\u652f\u6301 Stylus/Less/Sass, \u53ea\u4e0d\u8fc7\u9700\u8981\u5b89\u88c5\u5bf9\u5e94\u7684npm\u4f9d\u8d56\u3002\u5b98\u65b9\u6587\u6863\u8a00\u8bed\u6a21\u7cca\uff0c\u6211\u4eec\u8fd9\u91cc\u4fbf\u6765\u5b9e\u8df5\u4e00\u4e0b\u5177\u4f53\u5982\u4f55\u5f00\u542ftylus/Less/Sass\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u652f\u6301 **stylus**\\n```bash\\nyarn add stylus --dev\\n```\\n\\n\u5982\u5728 App.vue \u540c\u76ee\u5f55\u4e0b\u65b0\u5efa***style.styl*** \u6837\u5f0f\u6587\u4ef6, \u7136\u540e\u5f15\u5165\uff1a\\n\\n```vue\\n// template \u548c script \u5185\u5bb9\u7565\u8fc7\\n<style lang=\\"stylus\\">\\n@import \'./style\';\\n</style>\\n```\\n\\n\u542f\u52a8\uff0c\u4f1a\u770b\u5230 Parcel \u9ed8\u8ba4\u5c06\u6837\u5f0f\u6587\u4ef6\u5185\u8054\u5230`<head>`\u6807\u7b7e\u4e2d\u3002\\n\\n\\n## \u652f\u6301 **less**\\n```bash\\nyarn add less --dev\\n```\\n\\n\u5982\u5728 App.vue \u540c\u76ee\u5f55\u4e0b\u65b0\u5efa***style.less*** \u6837\u5f0f\u6587\u4ef6, \u7136\u540e\u5f15\u5165\uff1a\\n\\n```vue\\n// template \u548c script \u5185\u5bb9\u7565\u8fc7\\n<style lang=\\"less\\">\\n@import \'./style\';\\n</style>\\n```\\n\\n## \u652f\u6301 **sass**\\n```bash\\nyarn add node-sass --dev\\n```\\n\\n\u5982\u5728 App.vue \u540c\u76ee\u5f55\u4e0b\u65b0\u5efa***style.scss*** \u6837\u5f0f\u6587\u4ef6, \u7136\u540e\u5f15\u5165\uff1a\\n\\n```vue\\n// template \u548c script \u5185\u5bb9\u7565\u8fc7\\n<style lang=\\"scss\\">\\n@import \'./style\';\\n</style>\\n```\\n\\n> \u6ce8\u610f\uff1a\u4e0a\u8ff0\u5982\u679c\u542f\u52a8\u5931\u8d25\uff0c\u53ef\u4ee5\u91cd\u88c5 `babel-preset-env` \u4f9d\u8d56\u3002\\n\\n\\n## \u95ee\u9898\\n\u5b9e\u8df5\u8fc7\u7a0b\u4e2d\u53d1\u73b0\u4e00\u4e2a\u95ee\u9898\uff1a \u5728vue \u7ec4\u4ef6 `<style>` \u4e2d\uff0c\u901a\u8fc7 `@import`\u5f15\u5165\u6837\u5f0f\u6587\u4ef6\u540e\uff0c\u4fee\u6539\u6837\u5f0f\u6587\u4ef6 HMR \u5931\u6548\u3002 \u8fd9\u662f\u4e2a\u8ba9\u4eba\u5f88\u53d7\u4f24\u7684\u95ee\u9898\u3002\u8be5\u95ee\u9898\u662f`parcel-plugin-vue`([\u67e5\u770bissue18](https://github.com/BoltDoggy/parcel-plugin-vue/issues/18)) \u5bfc\u81f4\u7684\uff0c\u76ee\u524d\u8fd8\u672a\u89e3\u51b3\u3002\\n\\n\u6211\u4eec\u8fd9\u91cc\u53ef\u4ee5\u5148\u5728vue \u7ec4\u4ef6\u7684 `<script>`\u4e2d\u5c06\u6837\u5f0f import \u8fdb\u6765\uff0c HMR\u6709\u6548\u3002"},{"id":"/parcel-vue","metadata":{"permalink":"/blog/parcel-vue","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/parcel-vue.md","source":"@site/blog/parcel-vue.md","title":"Parcel + Vue \u5c1d\u9c9c","description":"Webpack \u4e45\u8d1f\u76db\u540d\uff0c\u5305\u7f57\u4e07\u8c61\u3002\u82e5\u662f\u7528\u5176\u9020\u8f6e\u5b50\u7684\u8bdd\uff0c\u96be\u514d\u4fee\u4fee\u8865\u8865\u3002\u5e74\u524d\u5174\u8d77\u4e86Parcel\u6253\u5305\u5de5\u5177\uff0c\u53f7\u79f0\u201c\u6781\u901f\u96f6\u914d\u7f6e\u201d\uff0c\u8ba9\u4eba\u4e0d\u80dc\u5411\u5f80\u3002\u8fd9\u4e0d\u5f97\u7a7a\u4e86\uff0c\u5c31\u6765\u5c1d\u5c1d\u9c9c\uff0c\u8bb0\u5f55\u4e0b\u5982\u4f55\u4f7f\u7528 Parcel + Vue\u8fdb\u884c\u5f00\u53d1\u3002","date":"2018-01-24T19:46:26.000Z","formattedDate":"2018\u5e741\u670824\u65e5","tags":[{"label":"parcel","permalink":"/blog/tags/parcel"},{"label":"vue","permalink":"/blog/tags/vue"}],"readingTime":2.075,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Parcel + Vue \u5c1d\u9c9c","comments":true,"date":"2018-01-24T19:46:26.000Z","updated":"2018-01-24T19:46:26.000Z","tags":["parcel","vue"],"categories":null},"prevItem":{"title":"Parcel \u5f00\u542f\u4e09\u5927CSS\u9884\u5904\u7406\u5668--Stylus/Less/Sass","permalink":"/blog/parcel-step-2"},"nextItem":{"title":"frp \u5185\u7f51\u7a7f\u900f\u5b9e\u8df5","permalink":"/blog/net-cross-by-frp"}},"content":"Webpack \u4e45\u8d1f\u76db\u540d\uff0c\u5305\u7f57\u4e07\u8c61\u3002\u82e5\u662f\u7528\u5176\u9020\u8f6e\u5b50\u7684\u8bdd\uff0c\u96be\u514d\u4fee\u4fee\u8865\u8865\u3002\u5e74\u524d\u5174\u8d77\u4e86Parcel\u6253\u5305\u5de5\u5177\uff0c\u53f7\u79f0\u201c\u6781\u901f\u96f6\u914d\u7f6e\u201d\uff0c\u8ba9\u4eba\u4e0d\u80dc\u5411\u5f80\u3002\u8fd9\u4e0d\u5f97\u7a7a\u4e86\uff0c\u5c31\u6765\u5c1d\u5c1d\u9c9c\uff0c\u8bb0\u5f55\u4e0b\u5982\u4f55\u4f7f\u7528 Parcel + Vue\u8fdb\u884c\u5f00\u53d1\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n\u8fd9\u91cc\u662f[\u793a\u4f8b\u4ee3\u7801](https://github.com/p2yang/parcel-vue)!\\n\\n## \u9884\u5907\\n### \u4e24\u4e2a\u4f9d\u8d56\\n* `parcel-bundler`([\u6233\u6211\ud83d\udc47](https://www.npmjs.com/package/parcel-bundler))\\n\u8fd9\u662f ***Parcel*** \u6253\u5305\u5de5\u5177\uff0c\u201c\u6781\u901f\u96f6\u914d\u7f6e\u201d\u7684\u8d77\u6e90\u3002\\n\\n* `parcel-plugin-vue`([\u6233\u6211\ud83d\udc47](https://www.npmjs.com/package/parcel-plugin-vue))\\n\u8fd9\u662f\u4e00\u4e2a parcel \u63d2\u4ef6\uff0c\u4f7f pacel \u652f\u6301 `.vue` \u6587\u4ef6\u3002\\n\\n### \u9879\u76ee\u7ed3\u6784\\n```\\nparcel-vue\\n\u251c\u2500\u2500 package.json\\n\u251c\u2500\u2500 .babelrc\\n\u251c\u2500\u2500 index.html\\n\u251c\u2500\u2500src\\n   \u251c\u2500\u2500 App.vue\\n   \u251c\u2500\u2500 main.js\\n```\\n\u8fd9\u662f\u57fa\u672c\u7684\u9879\u76ee\u7ed3\u6784\u3002\\n\\n\\n## \u5f00\u59cb\\n1. \u5b89\u88c5parcel\u76f8\u5173\u5f00\u53d1\u4f9d\u8d56\\n\\n  ```\\n  yarn add parcel-bundler parcel-plugin-vue babel-preset-env -D\\n  ```\\n\\n2. \u5b89\u88c5vue\\n\\n  ```\\n  yarn add vue\\n  ```\\n\\n3. \u6dfb\u52a0\u5165\u53e3\u6587\u4ef6 `index.html`\\n\\n  ```\\n  <!DOCTYPE html>\\n  <html lang=\\"en\\">\\n  <head>\\n    <meta charset=\\"UTF-8\\">\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1.0\\">\\n    <title>parcel + vue</title>\\n  </head>\\n  <body>\\n    <div id=\\"app\\"></div>\\n    <script src=\\"./src/main.js\\"><\/script>\\n  </body>\\n  </html>\\n  ```\\n\\n4. \u6dfb\u52a0\u811a\u672c\u5185\u5bb9 `main.js` \u548c vue\u7ec4\u4ef6 `App.vue`\\n\\n  ```\\n  // ./src/main.js\\n  import Vue from \'vue\'\\n  import App from \'./App\'\\n\\n  new Vue({\\n    el: \'#app\',\\n    render: h => h(App)\\n  })\\n  ```\\n\\n  ```\\n  // App.vue\\n  <template>\\n    <h1>parcel vue</h1>\\n  </template>\\n\\n  <script>\\n  export default {\\n    name: \'App\'\\n  }\\n  <\/script>\\n  ```\\n\\n5. \u914d\u7f6e `.babelrc`\\n  ```\\n  {\\n    \\"presets\\": [\\n      \\"env\\"\\n    ]\\n  }\\n  ```\\n\\n\\n\u5927\u529f\u544a\u6210\uff01\uff01\uff01\\n\\n\u989d\uff0c\u518d\u52a0\u6761\u542f\u52a8\u811a\u672c\u5427\uff01\\n```\\n// package.json\\n{\\n  ...,\\n  \\"scripts\\": {\\n    \\"start\\": \\"parcel index.html\\"\\n  },\\n  ...\\n}\\n```\\n\\nNode\u6267\u884c:\\n```bash\\nyarn start\\n```\\n\\n\u597d\u4e86\uff0c\u6d4f\u89c8\u5668\u6253\u5f00http://localhost:1234\u770b\u770b\u5427\u3002\\n\\n## \u751f\u4ea7\u73af\u5883\\n\u6784\u5efa\u751f\u4ea7\u73af\u5883\uff0c\u53ea\u9700\u8981\u6267\u884c\uff1a\\n```\\nparcel build index.html --public-url ./\\n```\\n\\n\u8fd9\u91cc\u4ee5index.html\u4e3a\u5165\u53e3\uff0cparcel\u4f1a\u81ea\u52a8\u8bc6\u522b\u548c\u63d0\u53d6\u76f8\u5173\u4f9d\u8d56\u8d44\u6e90\uff0c\u5e76\u5728\u6839\u76ee\u5f55\u4e0b\u521b\u5efa `dist` \u6587\u4ef6\u5939\u3002\u8fd9\u91cc `dist` \u540d\u79f0\u662f\u9ed8\u8ba4\u7684\uff0c\u53ef\u4ee5\u6309\u610f\u613f\u66f4\u6539\u3002\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4 `parcel build -h` \u67e5\u770b\u5177\u4f53\u7684\u53c2\u6570\u5217\u8868\u3002\\n\\n\u67e5\u770b[\u793a\u4f8b\u4ee3\u7801](https://github.com/p2yang/parcel-vue)\u3002"},{"id":"/net-cross-by-frp","metadata":{"permalink":"/blog/net-cross-by-frp","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/net-cross-by-frp.md","source":"@site/blog/net-cross-by-frp.md","title":"frp \u5185\u7f51\u7a7f\u900f\u5b9e\u8df5","description":"\u5047\u8bbe\u4f60\u5728\u672c\u5730\u5f00\u53d1\u4e00\u4e2a\u7f51\u7ad9\uff0c\u9700\u8981\u5728\u6d4f\u89c8\u5668\u4e0a\u8fdb\u884c\u6d4b\u8bd5\uff0c\u4e00\u822c\u76f4\u63a5\u7528IP\u8bbf\u95ee\u5373\u53ef\uff0c\u9ebb\u70e6\u4e00\u70b9\u7684\u53ef\u4ee5\u8bbe\u7f6e\u4ee3\u7406\u3002\u4f46\u5982\u679c\u6709\u8fd9\u6837\u4e00\u79cd\u6d4f\u89c8\u5668\uff0c\u5979\u53ea\u80fd\u8bbf\u95ee\u516c\u7f51\u4e0a\u7684\u7ad9\u70b9\uff0c\u5b8c\u5168\u5ffd\u89c6\u4ee5\u4e0a\u4e24\u79cd\u65b9\u6cd5\u7684\u642d\u8baa\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528\u201c\u5185\u7f51\u7a7f\u900f\u201d\u4e86\u3002\u5b9e\u73b0\u65b9\u6cd5\u6709\u5f88\u591a\uff0c\u8fd9\u91cc\u8bb0\u5f55\u4e00\u4e0b\u6211\u91c7\u7528frp\u5b9e\u73b0\u6b64\u529f\u80fd\u7684\u8fc7\u7a0b\u3002","date":"2018-01-11T19:24:09.000Z","formattedDate":"2018\u5e741\u670811\u65e5","tags":[{"label":"http","permalink":"/blog/tags/http"}],"readingTime":4.445,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"frp \u5185\u7f51\u7a7f\u900f\u5b9e\u8df5","comments":true,"date":"2018-01-11T19:24:09.000Z","updated":"2018-01-11T19:24:09.000Z","tags":["http"],"categories":null},"prevItem":{"title":"Parcel + Vue \u5c1d\u9c9c","permalink":"/blog/parcel-vue"},"nextItem":{"title":"\u5173\u4e8e Opera Mini \u5f00\u53d1\u7684\u90a3\u4e9b\u4e8b\u513f","permalink":"/blog/opera-mini"}},"content":"\u5047\u8bbe\u4f60\u5728\u672c\u5730\u5f00\u53d1\u4e00\u4e2a\u7f51\u7ad9\uff0c\u9700\u8981\u5728\u6d4f\u89c8\u5668\u4e0a\u8fdb\u884c\u6d4b\u8bd5\uff0c\u4e00\u822c\u76f4\u63a5\u7528IP\u8bbf\u95ee\u5373\u53ef\uff0c\u9ebb\u70e6\u4e00\u70b9\u7684\u53ef\u4ee5\u8bbe\u7f6e\u4ee3\u7406\u3002\u4f46\u5982\u679c\u6709\u8fd9\u6837\u4e00\u79cd\u6d4f\u89c8\u5668\uff0c\u5979\u53ea\u80fd\u8bbf\u95ee\u516c\u7f51\u4e0a\u7684\u7ad9\u70b9\uff0c\u5b8c\u5168\u5ffd\u89c6\u4ee5\u4e0a\u4e24\u79cd\u65b9\u6cd5\u7684\u642d\u8baa\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528\u201c\u5185\u7f51\u7a7f\u900f\u201d\u4e86\u3002\u5b9e\u73b0\u65b9\u6cd5\u6709\u5f88\u591a\uff0c\u8fd9\u91cc\u8bb0\u5f55\u4e00\u4e0b\u6211\u91c7\u7528frp\u5b9e\u73b0\u6b64\u529f\u80fd\u7684\u8fc7\u7a0b\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n[frp](https://github.com/fatedier/frp)\u662fgithub\u4e0a\u7684\u4e00\u4e2a\u5f00\u6e90\u9879\u76ee\uff0c\u914d\u7f6e\u8d77\u6765\u5f88\u7b80\u5355\u3002\\n\\n## \u51c6\u5907\\n\u6211\u4eec\u9700\u8981\u4e00\u53f0\u670d\u52a1\u5668\u6765\u8fd0\u884cfrp server\uff0c\u7136\u540e\u672c\u5730\u8fd0\u884cfrp client\u7aef\u3002\u6700\u597d\u8fd8\u6709\u4e00\u4e2a\u57df\u540d\u6765\u5feb\u901f\u8bbf\u95ee\uff08\u5f53\u7136\uff0c\u6ca1\u6709\u4e5f\u53ef\u4ee5\uff0c\u65e0\u540d\u80dc\u6709\u540d\u561b\uff09\u3002\\n* \u4e00\u53f0\u670d\u52a1\u5668\\n* \u4e00\u4e2a\u57df\u540d\\n* frp server\u7aef\\n* frp client\u7aef\\n\\n\u70b9\u51fb\u524d\u5f80[frp\u4e0b\u8f7d](https://github.com/fatedier/frp/releases)\uff0c\u9009\u62e9\u5bf9\u5e94\u7684\u7cfb\u7edf\u7248\u672c\uff0c\u4e0b\u8f7d\u5305\u4e2d\u5305\u542b\u4e86server\u7aef\u548cclient\u7aef\u3002\\n\\n## server\u914d\u7f6e\u548c\u542f\u52a8\\n### \u4e0b\u8f7d\u5b89\u88c5\\n\u5728\u670d\u52a1\u5668\u4e0a\uff0c\u9009\u62e9\u597d\u76ee\u5f55\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u4e0b\u8f7dfrp:\\n```bash\\nwget https://github.com/fatedier/frp/releases/download/v0.14.1/frp_0.14.1_linux_386.tar.gz\\n```\\n\\n\u7136\u540e\uff0c\u89e3\u538b\\n```bash\\ntar zxvf frp_0.14.1_linux_386.tar.gz\\n```\\n\\n\u89e3\u538b\u51fa\u7684\u6587\u4ef6\u5939\u4e2dserver\u548cclient\u7684\u914d\u7f6e, \u5982\u4e0b\u56fe\u793a\\n![frp_0.14.1_linux_386](/images/frp/server.png)\\n\\n\u8fd9\u91cc\uff0c\u6211\u4eec\u53ea\u9700\u8981\u7528\u5230 `frps` \u548c `frps.ini` \u4e24\u4e2a\u6587\u4ef6\u3002\\n\\n### \u4fee\u6539\u914d\u7f6e\\n\u6211\u4eec\u5728\u9ed8\u8ba4\u914d\u7f6e\u4e0b\u6dfb\u52a0 http \u8bbf\u95ee\u7aef\u53e3\u914d\u7f6e\uff1a\\n```sh\\nvhost_http_port = 8080\\n```\\n\\n`frps.ini` \u7ed3\u679c\u5982\u4e0b\uff1a\\n```sh\\n[common]\\nbind_port = 7000\\nvhost_http_port = 8080\\n```\\n\u63a5\u4e0b\u6765\u5c31\u53ef\u4ee5\u542f\u52a8\u4e86\u3002\\n\\n### \u542f\u52a8\\n\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u6267\u884c:\\n```bash\\n./frps -c ./frps.ini\\n```\\n\\n\u53ef\u4ee5\u770b\u5230\uff1a\\n```\\n\u25b6 ./frps -c ./frps.ini\\n2018/01/11 19:57:37 [I] [service.go:88] frps tcp listen on 0.0.0.0:7000\\n2018/01/11 19:57:37 [I] [service.go:117] http service listen on 0.0.0.0:8080\\n2018/01/11 19:57:37 [I] [main.go:112] Start frps success\\n2018/01/11 19:57:37 [I] [main.go:114] PrivilegeMode is enabled, you should pay more attention to security issues\\n```\\n\\n\u5230\u6b64\uff0cserver\u7aef\u542f\u52a8\u5b8c\u6210\uff0c\u63a5\u4e0b\u6765\u770b\u770b\u672c\u5730\u8be5\u5982\u4f55\uff08\u6ce8\u610f\uff0c\u8bf7\u52ff\u5173\u95edserver\uff0c\u5982\u8981\u540e\u53f0\u8fd0\u884c\u8bf7\u7528\u5176\u4ed6\u8f85\u52a9\u5de5\u5177\uff0c\u6216\u770b\u5347\u7ea7\u4ecb\u7ecd\uff09\u3002\\n\\n\\n### \u89e3\u6790\u4e2a\u57df\u540d\u5148\\n\u4e3a\u4e86\u65b9\u4fbf\u8bbf\u95ee\uff0c\u6211\u4eec\u5148\u6dfb\u52a0\u4e00\u6761\u89e3\u6790\u8bb0\u5f55\u5427\u3002\\n\u7ed9\u81ea\u5df1\u7684\u57df\u540d[p2yang.com](http://p2yang.com)\u6dfb\u52a0\u4e00\u6761A\u8bb0\u5f55\uff0c\u89e3\u6790\u5230\u4e0a\u9762\u7684\u670d\u52a1\u5668IP(\u5047\u8bbe\u662fxx.xx.xx.xx), \u8fd9\u91cc\u4e8c\u7ea7\u57df\u540d\u8bbe\u4e3a work.\\n\\n\u7136\u540e\uff0c\u6765\u914d\u7f6e\u5ba2\u6237\u7aef\u5427\u3002\\n\\n\\n### frp client\u914d\u7f6e\u4e0e\u8fde\u63a5\\n\u6839\u636e\u672c\u673a\u7cfb\u7edf\u4e0b\u8f7d\u5ba2\u6237\u7aef\u3002\u8fd9\u91cc\u4f1a\u7528\u5230\u4e24\u4e2a\u6587\u4ef6: `frpc` \u548c `frpc.ini`.\\n\u6253\u5f00`frpc.ini`, \u6dfb\u52a0\u914d\u7f6e:\\n```\\n[common]\\nserver_addr = xx.xx.xx.xx\\nserver_port = 7000\\n\\n[web]\\ntype = http\\nlocal_port = 80\\ncustom_domains = www.yourdomain.com\\n```\\n\u8bf4\u660e\uff1a\u8fd9\u91cc\u7684 `server_addr` \u662f\u4f60\u542f\u52a8 frp server\u7684\u670d\u52a1\u5668; `type` \u8bbe\u4e3a http; `custom_domains` \u8bbe\u4e3a\u89e3\u6790\u7684\u57df\u540d; \u5176\u4ed6\u9ed8\u8ba4\u5373\u53ef\u3002`[web]` \u4e2d\u62ec\u53f7\u4e2d\u7684\u540d\u5b57\u53ef\u4ee5\u6539\u3002\\n\\n\u6267\u884c\uff1a\\n```bash\\n\u25b6 ./frpc -c ./frpc.ini\\n2018/01/11 20:11:03 [I] [control.go:277] [7621df25976e76bb] login to server success, get run id [7621df25976e76bb], server udp port [0]\\n2018/01/11 20:11:03 [I] [control.go:412] [7621df25976e76bb] [web] start proxy success\\n```\\n\\n\u5230\u6b64\uff0c\u542f\u52a8\u6210\u529f\uff01\uff01\uff01\\n\u5f00\u542f\u672c\u5730\u9759\u6001\u670d\u52a1\uff0c\u6253\u5f00\u94fe\u63a5[http://work.p2yang.com:8080](http://work.p2yang.com:8080), \u5373\u53ef\u5728\u516c\u7f51\u4e0a\u8bbf\u95ee\u672c\u5730\u7684\u5f00\u53d1\u8d44\u6e90\u3002\\n\\n### \u8fdb\u9636\\n\u5982\u4f55\u8ba9\u591a\u4e2a\u5f00\u53d1\u8005\u5171\u7528\u4e00\u4e2afrp server\uff0c\u5e76\u4eab\u7528\u81ea\u5b9a\u4e49\u7684\u4e8c\u7ea7\u57df\u540d\uff1f\\n\\n\u8fd9\u91ccfrp\u914d\u7f6e\u4e5f\u5f88\u7b80\u5355\u3002\\n\\n`frps.ini` \u6dfb\u52a0\u914d\u7f6e\u5982\u4e0b\uff1a\\n```\\n[common]\\nbind_port = 7000\\nvhost_http_port = 8080\\n\\nsubdomain_host = p2yang.com\\n```\\n\\n`frpc.ini` \u6dfb\u52a0\u914d\u7f6e\u5982\u4e0b\uff1a\\n```\\n[common]\\nserver_addr = xx.xx.xx.xx\\nserver_port = 7000\\n\\n[web]\\ntype = http\\nlocal_port = 80\\nsubdomain = work\\n```\\n\u6ce8\u610f\uff0c\u4e0d\u540c\u7528\u6237\u7684 `[web]` \u914d\u7f6e\u9700\u8981\u53d6\u4e0d\u540c\u7684\u540d\u5b57\uff0c`subdomain` \u81ea\u5df1\u5b9a\u4e49\u5373\u53ef\u3002\u5f53\u7136\uff0c\u91cd\u540d\u4f1a\u4ea7\u751f\u51b2\u7a81\uff0c\u8bf7\u4fdd\u6301\u72ec\u4e00\u65e0\u4e8c\u3002\\n\\n\u57df\u540d\u6dfb\u52a0 `*` \u6cdb\u89e3\u6790\u3002\\n\\n\u7136\u540e\uff0c\u4e0d\u540c\u7684\u7528\u6237\u542f\u52a8\u81ea\u5df1\u7684frp\u5ba2\u6237\u7aef\uff0c\u5373\u53ef\u5171\u4eabfrp server\u4e86\u3002\\n\\n\\n## \u7ed3\u8bed\\nfrp\u8fd8\u652f\u6301\u5176\u4ed6\u8bb8\u591a\u529f\u80fd\uff0c\u70b9\u51fb\u67e5\u770b[\u5b98\u65b9\u4e2d\u6587\u6587\u6863](https://github.com/fatedier/frp/blob/master/README_zh.md)\u3002\u6211\u5c31\u5148\u5230\u8fd9\u91cc\u5427\u3002"},{"id":"/opera-mini","metadata":{"permalink":"/blog/opera-mini","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/opera-mini.md","source":"@site/blog/opera-mini.md","title":"\u5173\u4e8e Opera Mini \u5f00\u53d1\u7684\u90a3\u4e9b\u4e8b\u513f","description":"\u524d\u671f\u6682\u65f6\u5148\u8bb0\u5f55\u8fd9\u4e9b\uff0c\u7a0d\u540e\u518d\u8865\u5145\u3002","date":"2018-01-10T15:12:22.000Z","formattedDate":"2018\u5e741\u670810\u65e5","tags":[{"label":"browser","permalink":"/blog/tags/browser"}],"readingTime":1.12,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u5173\u4e8e Opera Mini \u5f00\u53d1\u7684\u90a3\u4e9b\u4e8b\u513f","comments":true,"date":"2018-01-10T15:12:22.000Z","updated":"2018-01-10T15:12:22.000Z","tags":["browser"],"categories":null},"prevItem":{"title":"frp \u5185\u7f51\u7a7f\u900f\u5b9e\u8df5","permalink":"/blog/net-cross-by-frp"},"nextItem":{"title":"Node API - Querystring","permalink":"/blog/node-querystring"}},"content":"\u524d\u671f\u6682\u65f6\u5148\u8bb0\u5f55\u8fd9\u4e9b\uff0c\u7a0d\u540e\u518d\u8865\u5145\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u4e0d\u652f\u6301\u7684\u4e00\u4e9b CSS Style\\n  * line-height\\n  * border-radius\\n  * CSS gradients (\u8001\u8001\u5b9e\u5b9e\u7528 background-color \u5427)\\n  * CSS animations\\n  * font-family\\n  * icon fonts (\u7528svg\u66ff\u4ee3)\\n  * \u53ea\u6709body\u5143\u7d20\u652f\u6301\u6eda\u52a8, \u5176\u4ed6\u5143\u7d20\u5373\u4f7f\u52a0overflow\u4e5f\u4e0d\u884c\u3002\u5373\u4f7f\u662fiframe\uff0c\u4e5f\u4f1a\u88ab\u5207\u6389\u4e0d\u8db3\u663e\u793a\u7684\u90e8\u5206\u3002\\n  * fixed\u5b9a\u4f4d\\n\\n## \u6ce8\u610f\u4e8b\u9879\uff1a\\n* \u52a8\u6001\u56fe\u53ea\u4f1a\u6e32\u67d3\u7b2c\u4e00\u5e27\uff0c\u4e0d\u4f1a\u52a8\u3002\\n* \u56fe\u7247\u4f1a\u88ab\u538b\u7f29\uff0c\u5efa\u8bae\u4e0d\u8981\u7528\u56fe\u7247\u663e\u793a\u6587\u672c\u3002\u5982\u679c\u975e\u8981\u7528\u7684\u8bdd\uff0c\u53ef\u5728CSS\u4e2d\u5f15\u5165\u56fe\u7247\uff0c\u5e76\u4e14\u5bf9\u56fe\u7247\u505a\u4f18\u5316\u9002\u914d\u3002\\n* \u4e0d\u652f\u6301\u4efb\u4f55\u52a8\u753b\uff0c\u5305\u62ec\u52a8\u6001gif, \u52a8\u6001svg, blink/marquee\u5143\u7d20\u7b49\u3002\u56e0\u4e3a\u670d\u52a1\u5668\u6e32\u67d3\u5e76\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u7684\u53ea\u662f\u4e00\u5f20\u5feb\u7167\u3002\\n* flex \u5e03\u5c40\u4f1a\u5f71\u54cd\u5143\u7d20\u7684width, \u5bfc\u81f4ellipsis\u5931\u8d25\uff0c\u6ce8\u610f\u4f7f\u7528\uff1b\\n\\n## \u53c2\u8003\\n[Opera Mini: Web Content Authoring Guidelines](https://dev.opera.com/articles/opera-mini-content-authoring-guidelines/#basic-html-css)\\n[Making websites that work well on Opera Mini](https://dev.opera.com/articles/making-sites-work-opera-mini/)"},{"id":"/node-querystring","metadata":{"permalink":"/blog/node-querystring","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/node-querystring.md","source":"@site/blog/node-querystring.md","title":"Node API - Querystring","description":"querystring \u662f\u4e00\u4e2a\u5b9e\u7528\u7684 URL query \u5b57\u7b26\u4e32\u5904\u7406\u5de5\u5177\uff0c\u53ef\u4ee5\u5e8f\u5217\u5316\u4e00\u4e32\u952e\u503c\u5bf9\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u5c06\u5bf9\u8c61\u8f6c\u5316\u6210\u4e00\u6bb5 a=b&c=d \u5f62\u5f0f\u7684\u5b57\u7b26\u4e32\u3002\u603b\u4e4b\uff0c\u975e\u5e38\u597d\u7528\uff0c\u5c24\u5176\u662f\u5904\u7406\u8ddfurl query\u76f8\u5173\u53c2\u6570\u7684\u65f6\u5019\u3002","date":"2018-01-04T22:56:50.000Z","formattedDate":"2018\u5e741\u67084\u65e5","tags":[{"label":"node","permalink":"/blog/tags/node"}],"readingTime":3.165,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Node API - Querystring","comments":true,"date":"2018-01-04T22:56:50.000Z","updated":"2018-01-04T22:56:50.000Z","tags":["node"],"categories":null},"prevItem":{"title":"\u5173\u4e8e Opera Mini \u5f00\u53d1\u7684\u90a3\u4e9b\u4e8b\u513f","permalink":"/blog/opera-mini"},"nextItem":{"title":"\u5173\u4e8e\u7f51\u9875\u6253\u5370\u7684\u5f00\u53d1\u5b9e\u8df5","permalink":"/blog/html-print"}},"content":"`querystring` \u662f\u4e00\u4e2a\u5b9e\u7528\u7684 URL query \u5b57\u7b26\u4e32\u5904\u7406\u5de5\u5177\uff0c\u53ef\u4ee5\u5e8f\u5217\u5316\u4e00\u4e32\u952e\u503c\u5bf9\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u5c06\u5bf9\u8c61\u8f6c\u5316\u6210\u4e00\u6bb5 `a=b&c=d` \u5f62\u5f0f\u7684\u5b57\u7b26\u4e32\u3002\u603b\u4e4b\uff0c\u975e\u5e38\u597d\u7528\uff0c\u5c24\u5176\u662f\u5904\u7406\u8ddfurl query\u76f8\u5173\u53c2\u6570\u7684\u65f6\u5019\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n\u8bf4\u660e\uff1a\u672c\u6587\u662f\u57fa\u4e8e node@9.3.0 \u6574\u7406\u3002\u67e5\u770b[\u5b98\u65b9\u6587\u6863](https://nodejs.org/docs/v9.3.0/api/querystring.html)\\n\\n## \u57fa\u672c\u7528\u6cd5\\n\u5728 node \u73af\u5883\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5 require \u6216 import\uff0c\u5982\u4e0b\uff1a\\n```js\\nconst querystring = require(\'querystring\')\\n```\\n\\n\u9700\u8981\u8bf4\u660e\u7684\u662f\uff0cnpm\u4e0a\u6709\u4e00\u4e2a [qs](https://www.npmjs.com/package/qs) \u5305\uff0c\u8ddfquerystring\u7c7b\u4f3c\uff0c\u4f46\u529f\u80fd\u66f4\u5f3a\u5927\uff0c\u53ef\u4ee5\u770b\u770b\u3002\\n\\nnode querystring \u516c\u5f00\u7684\u6709\u56db\u4e2a\u65b9\u6cd5\uff0c\u6211\u4eec\u6765\u770b\u4e00\u770b\u3002\\n\\n## parse \u7231 stringify\\n`parse`\u548c`stringify`\u603b\u662f\u5f62\u5f71\u4e0d\u79bb\uff0c\u5728`JSON`\u4e2d\u5982\u6b64\uff0c\u8fd9\u91cc\u4e5f\u662f\u4e00\u6837\u3002\\n\\n### querystring.parse(str[, sep[, eq[, options]]])\\n\u53ef\u9009\u53c2\u6570\u6709\u70b9\u591a\uff0c\u5148\u6765\u4ecb\u7ecd\u4e00\u4e0b:\\n* str: `String`, \u76ee\u6807\u5b57\u7b26\u4e32;\\n* sep: `String`, str \u4e2d\u952e\u503c\u5bf9\u95f4\u7684\u5206\u9694\u7b26\uff0c\u9ed8\u8ba4\u662f`&`;\\n* eq: `String`, str \u4e2dkey\u548cvalue\u95f4\u7684\u5206\u9694\u7b26\uff0c\u9ed8\u8ba4\u662f`=`;\\n* options: `Object`, \u5305\u542b\u4e09\u4e2a\u5c5e\u6027\uff1a\\n  + decodeURIComponent: `Function`, \u89e3\u7801\u65b9\u6cd5\uff0c\u9ed8\u8ba4\u4f7f\u7528`querystring.unescape()`\\n  + maxKeys: `Number`, \u53ef\u4ee5\u89e3\u6790\u7684\u6700\u5927key\u6570\u76ee\uff0c\u9ed8\u8ba4\u662f1000\u3002\u8bbe\u4e3a0\uff0c\u5219\u8868\u793a\u4e0d\u9650\u5236\u6570\u91cf\u3002\\n\\n\u793a\u4f8b\u5982\u4e0b:\\n```js\\nquerystring.parse(\'foo=bar&abc=xyz&abc=123\')\\n/* Returns\\n{\\n  foo: \'bar\',\\n  abc: [\'xyz\', \'123\']\\n}\\n*/\\n```\\n\\n\u6ce8\u610f\uff1a\u5b98\u65b9\u6587\u6863\u8bf4\uff0c\u8fd4\u56de\u7684\u5bf9\u8c61\u4e0d\u5b8c\u5168\u7ee7\u627fjs\u7684`Object`, \u6240\u4ee5\u8bf8\u5982`obj.toString`, `obj.hasOwnProperty`\u4e4b\u7c7b\u672a\u5b9a\u4e49\u7684\u65b9\u6cd5\uff0c\u65e0\u6cd5\u4f7f\u7528\u54e6\uff5e\\n\\n\\n### querystring.stringify(obj[, sep[, eq[, options]]])\\n`sep`,`eq`\u540c\u4e0a\uff0c\u9ed8\u8ba4\u5206\u522b\u662f`&`\uff0c`=`.\\n* obj: `Object`, \u76ee\u6807\u5bf9\u8c61\\n* options: `Object`, \u5305\u542b\u4e00\u4e2a\u65b9\u6cd5\\n  + encodeURIComponent: `Function`, \u7f16\u7801\u65b9\u6cd5\uff0c\u9ed8\u8ba4\u4f7f\u7528`querystring.escape()`\\n\\n`obj`\u7684\u5c5e\u6027\u6709\u6240\u9650\u5236\uff0c\u53ea\u80fd\u8f6c\u5316 `String`, `Number`, `Boolean`, `String[]`, `Number[]`, `Boolean[]`\u7c7b\u578b\u7684\u7684\u503c\uff0c\u5176\u4ed6\u7c7b\u578b\u7684\u503c\u4f1a\u88ab\u8f6c\u5316\u4e3a\u7a7a\u5b57\u7b26\u4e32\u3002\\n\\n\u793a\u4f8b\u5982\u4e0b:\\n```js\\nquerystring.stringify({ foo: \'bar\', baz: [\'qux\', \'quux\'], corge: \'\' });\\n// returns \'foo=bar&baz=qux&baz=quux&corge=\'\\n\\nquerystring.stringify({ foo: \'bar\', baz: \'qux\' }, \';\', \':\');\\n// returns \'foo:bar;baz:qux\'\\n```\\n\\n## \u79bb\u5f00\uff0c\u8fd8\u662f\u7559\u4e0b\uff1f\\n`escape` or `unescape`\uff0c\u9009\u62e9\u53ea\u53d6\u51b3\u4e8e\u4f60\u3002\u4e00\u822c\u4e0d\u600e\u4e48\u7528\u3002\\n\u5b98\u65b9\u6709\u4e91\uff0c\\n> The querystring.escape() method is used by querystring.stringify() and **is generally not expected to be used directly**. It is exported primarily to allow application code to provide a replacement percent-encoding implementation if necessary by assigning querystring.escape to an alternative function.\\n\\n\u6240\u4ee5\uff0c\u7528\u4e0d\u7528\u968f\u4f60\u5fc3\u610f\u3002\u6211\u4eec\u8fd9\u91cc\u5c31\u7b80\u5355\u8bf4\u4e0b\u5427\uff08\u53cd\u6b63\u5199\u7684\u90fd\u5f88\u7b80\u6d01\u3002\u3002\u3002\uff09\u3002\\n\\n### querystring.escape(str)\\n\u7f16\u7801\u3002\\n```js\\nquerystring.escape(\'https://nodejs.org/dist/latest-v9.x/docs/api/querystring.html?nav=faq&sa=sae\')\\n// Returns \'https%3A%2F%2Fnodejs.org%2Fdist%2Flatest-v9.x%2Fdocs%2Fapi%2Fquerystring.html%3Fnav%3Dfaq%26sa%3Dsae\'\\n```\\n\\n### querystring.unescape(str)\\n\u89e3\u7801\uff0c\u4e0eescape\u76f8\u53cd\u3002\\n```js\\nquerystring.unescape(\'https%3A%2F%2Fnodejs.org%2Fdist%2Flatest-v9.x%2Fdocs%2Fapi%2Fquerystring.html%3Fnav%3Dfaq%26sa%3Dsae\')\\n// Returns \'https://nodejs.org/dist/latest-v9.x/docs/api/querystring.html?nav=faq&sa=sae\'\\n```\\n\\n## \u7ed3\u8bed\\n\u8bf4\u5b9e\u8bdd\uff0c\u4e4b\u524d\u4ece\u522b\u4eba\u7684\u6587\u7ae0\u4e2d\u53bb\u770b\u7528\u6cd5\uff0c\u603b\u89c9\u5f97\u6349\u6025\u3002md\u4e0d\u5199\u65f6\u95f4\uff0c\u4e0d\u5199\u7248\u672c\uff0c\u884c\u6587\u4e5f\u4e0d\u683c\u5f0f\u5316\uff0c\u6781\u6613\u4ea7\u751f\u8bef\u89e3\u3002\u540e\u6765\u603b\u7b97\u660e\u767d\u4e86\uff0c\u522b\u4eba\u56bc\u70c2\u5269\u4e0b\uff0c\u5fc3\u91cc\u8981\u6709\u4e2a\u8c31\u513f\u3002\u4e3b\u52a8\u88ab\u52a8\u4e4b\u95f4\uff0c\u4e0d\u53ea\u6709\u60c5\u8da3\uff01"},{"id":"/html-print","metadata":{"permalink":"/blog/html-print","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/html-print.md","source":"@site/blog/html-print.md","title":"\u5173\u4e8e\u7f51\u9875\u6253\u5370\u7684\u5f00\u53d1\u5b9e\u8df5","description":"\u6700\u8fd1\u63a5\u5230\u4e86\u4e00\u4e2aPC\u6253\u5370\u9700\u6c42\uff0c\u5b9e\u73b0\u7f51\u9875\u7279\u5b9a\u5185\u5bb9\u6253\u5370\u529f\u80fd\u3002\u636e\u6211\u6240\u77e5\uff0c\u6253\u5370\u662f\u76f4\u63a5\u8c03\u7528 window.print() \u5c31\u80fd\u5524\u8d77\u6d4f\u89c8\u5668\u6253\u5370\u529f\u80fd\u7684\u3002MDN\u4e0a\u7684\u63cf\u8ff0\u53ca\u5176\u7b80\u6d01\uff1a\u8c03\u7528\u6253\u5370\uff0c\u4e0d\u80fd\u4f20\u53c2\uff0c\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u6807\u51c6\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u7f51\u9875\u662f\u5565\u6837\uff0c\u6253\u5370\u4f30\u8ba1\u5c31\u662f\u50bb\u6837\u3002\u4e00\u756a\u8c03\u7814\uff0c\u627e\u5230\u4e86\u51e0\u79cd\u89e3\u51b3\u529e\u6cd5\u5217\u4e3e\u5982\u4e0b\u3002","date":"2017-12-11T12:31:50.000Z","formattedDate":"2017\u5e7412\u670811\u65e5","tags":[{"label":"html","permalink":"/blog/tags/html"}],"readingTime":2.7,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u5173\u4e8e\u7f51\u9875\u6253\u5370\u7684\u5f00\u53d1\u5b9e\u8df5","comments":true,"date":"2017-12-11T12:31:50.000Z","updated":"2017-12-11T12:31:50.000Z","tags":["html"],"categories":null},"prevItem":{"title":"Node API - Querystring","permalink":"/blog/node-querystring"},"nextItem":{"title":"npm\u5305\u53d1\u5e03\u5b9e\u8df5","permalink":"/blog/npm-package"}},"content":"\u6700\u8fd1\u63a5\u5230\u4e86\u4e00\u4e2aPC\u6253\u5370\u9700\u6c42\uff0c\u5b9e\u73b0\u7f51\u9875\u7279\u5b9a\u5185\u5bb9\u6253\u5370\u529f\u80fd\u3002\u636e\u6211\u6240\u77e5\uff0c\u6253\u5370\u662f\u76f4\u63a5\u8c03\u7528 `window.print()` \u5c31\u80fd\u5524\u8d77\u6d4f\u89c8\u5668\u6253\u5370\u529f\u80fd\u7684\u3002[MDN](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/print)\u4e0a\u7684\u63cf\u8ff0\u53ca\u5176\u7b80\u6d01\uff1a\u8c03\u7528\u6253\u5370\uff0c\u4e0d\u80fd\u4f20\u53c2\uff0c\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u6807\u51c6\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u7f51\u9875\u662f\u5565\u6837\uff0c\u6253\u5370\u4f30\u8ba1\u5c31\u662f\u50bb\u6837\u3002\u4e00\u756a\u8c03\u7814\uff0c\u627e\u5230\u4e86\u51e0\u79cd\u89e3\u51b3\u529e\u6cd5\u5217\u4e3e\u5982\u4e0b\u3002\\n\\n\x3c!--truncate--\x3e\\n## CSS Media print\\n\u5bf9\u4e8e\u5b9a\u5236\u6027\u4e0d\u9ad8\uff0c\u7ed3\u6784\u8f83\u4e3a\u7b80\u5355\u7684\u9875\u9762\u6765\u8bf4\uff0c\u4f7f\u7528CSS\u7684Media type\u5c5e\u6027\u8f83\u4e3a\u5408\u9002\u3002\\n\\n\u817e\u8bafCDC\u6709\u4e00\u7bc7 \u300a[Print \u2014\u2014 \u88ab\u57cb\u6ca1\u7684Media Type](http://cdc.tencent.com/2014/08/19/print-%E8%A2%AB%E5%9F%8B%E6%B2%A1%E7%9A%84media-type/)\u300b\u5bf9 `@media print` \u7684\u7528\u6cd5\u8bb2\u8ff0\u7684\u5341\u5206\u6e05\u6670\uff0c\u53ef\u524d\u5f80\u67e5\u9605\uff0c\u672c\u6587\u4e0d\u518d\u8d58\u8ff0\u3002\\n\\n\u7b80\u5355\u6765\u8bf4\uff0c\u6211\u4eec\u53ef\u4ee5\u5728 `@media print` \u4e2d\u4e66\u5199\u6253\u5370\u6240\u9700\u7684\u6837\u5f0f\uff0c\u65e0\u5173\u5185\u5bb9\u53ef\u4ee5\u76f4\u63a5 `display: none` \u6389\u3002\u793a\u4f8b\u5982\u4e0b\uff1a\\n```\\n\x3c!-- css --\x3e\\n@media print {\\n  \x3c!-- code your style --\x3e\\n}\\n```\\n\\n\u6211\u4eec\u8fd8\u53ef\u4ee5\u5916\u94fe\u4e00\u4e2a\u5355\u72ec\u7684\u6837\u5f0f\u6587\u4ef6\u6765\u5b58\u50a8\u6253\u5370\u6837\u5f0f\uff0c\u5982\u4e0b\uff1a\\n```\\n<link rel=\\"stylesheet\\" href=\\"print.css\\" media=\\"print\\"/>\\n```\\n\\n\u8865\u5145\u8bf4\u660e\uff1a\u6837\u5f0f\u5f52\u6837\u5f0f\uff0c\u6253\u5370\u8fd8\u5f97\u9760 `widnow.print()`\u3002\\n\\n## Iframe\\n\u5982\u679c\u5b9a\u5236\u5316\u8f83\u9ad8\uff0c\u57fa\u4e8e\u5f53\u524d\u9875\u9762\u6539\u52a8\u592a\u5927\u7684\u8bdd\uff0c\u4f7f\u7528`@media print` \u5c31\u4e0d\u592a\u5408\u9002\u4e86\u3002\u8fd9\u65f6\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5d4c\u5957 *iframe* \u7684\u65b9\u6cd5\u6765\u5b9e\u73b0\u53e6\u7c7b\u7684\u6253\u5370\u3002\\n\\n\u6211\u4eec\u53ef\u4ee5\u52a8\u6001\u521b\u5efa iframe \u5143\u7d20\uff0c\u5c06\u60f3\u8981\u6253\u5370\u7684\u5185\u5bb9\u53ca\u6837\u5f0f\u6ce8\u5165\u5176\u4e2d\uff0c\u518d\u5c06iframe\u5143\u7d20\u9690\u85cf\u5230\u5f53\u524d\u9875\u9762\uff0c\u7136\u540e\u7b49iframe\u91cc\u7684\u5185\u5bb9\u52a0\u8f7d\u5b8c\u540e\uff0c\u76f4\u63a5\u8c03\u7528 `iframe.contentWindow.document.print()` \u5373\u53ef\u3002\\n\\n\u8bf4\u8d77\u6765\u7b80\u5355\uff0c\u5b9e\u9645\u64cd\u4f5c\u8fd8\u662f\u633a\u590d\u6742\u7684\uff0c\u597d\u5728github\u4e0a\u5df2\u7ecf\u6709\u505a\u597d\u7684\u8f6e\u5b50\u4e86 \u2014\u2014 [Print.js](https://github.com/crabbly/print.js)\u3002\\n\u4e0d\u8fc7\uff0c\u4e2a\u4eba\u89c9\u5f97\u5b83\u652f\u6301\u7684\u683c\u5f0f\u867d\u591a\uff0c\u4f46\u6709\u4e00\u4e9b\u5c40\u9650\u6027\uff0c\u6240\u4ee5\u6211fork\u505a\u4e86\u4e00\u4e9b\u7b80\u5355\u7684\u4fee\u6539\uff0c\u5373[html-print](https://github.com/p2yang/html-print)\uff0c\u76ee\u524d\u4e3b\u8981\u7528\u4e8e\u6253\u5370html\u5185\u5bb9\u3002\\n\\n\u8bdd\u8bf4`Print.js` \u7684\u6e90\u7801\u6e05\u6670\u660e\u4e86\uff0c\u5982\u679c\u76f4\u63a5\u7528\u4e0d\u65b9\u4fbf\u7684\u8bdd\uff0c\u53ef\u4ee5fork\u5b9a\u5236\u81ea\u5df1\u7684\u5185\u5bb9\u3002\\n\\n## \u7ed3\u8bed\\n\u4ee5\u4e0a\u662f\u7eaf\u7cb9\u7684\u7f51\u9875\u5f00\u53d1\u8005\u53ef\u4ee5\u505a\u7684\u90a3\u4e9b\u4e8b\u513f\uff0c\u66f4\u5f3a\u5927\u7701\u4e8b\u513f\u7684\u89e3\u51b3\u65b9\u6cd5\u662f\u7528\u63d2\u4ef6\uff0c\u524d\u63d0\u662f\u4f60\u7684\u5185\u5bb9\u503c\u5f97\u7528\u6237\u9ed8\u9ed8\u7684\u88c5\uff01"},{"id":"/npm-package","metadata":{"permalink":"/blog/npm-package","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/npm-package.md","source":"@site/blog/npm-package.md","title":"npm\u5305\u53d1\u5e03\u5b9e\u8df5","description":"npm package\u4e0b\u8f7d\u5bb9\u6613\uff0cpublish\u4e5f\u5f88\u5bb9\u6613\u3002\u6211\u4eec\u6765\u5b9e\u8df5\u4e00\u4e0b\u5427\uff01","date":"2017-12-07T12:41:16.000Z","formattedDate":"2017\u5e7412\u67087\u65e5","tags":[{"label":"npm","permalink":"/blog/tags/npm"}],"readingTime":1.725,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"npm\u5305\u53d1\u5e03\u5b9e\u8df5","comments":true,"date":"2017-12-07T12:41:16.000Z","updated":"2017-12-07T12:41:16.000Z","tags":["npm"],"categories":null},"prevItem":{"title":"\u5173\u4e8e\u7f51\u9875\u6253\u5370\u7684\u5f00\u53d1\u5b9e\u8df5","permalink":"/blog/html-print"},"nextItem":{"title":"\u5c0f\u8bd5 Momentjs Query API","permalink":"/blog/momentjs-query"}},"content":"npm package\u4e0b\u8f7d\u5bb9\u6613\uff0cpublish\u4e5f\u5f88\u5bb9\u6613\u3002\u6211\u4eec\u6765\u5b9e\u8df5\u4e00\u4e0b\u5427\uff01\\n\x3c!--truncate--\x3e\\n\\n## \u57fa\u672c\u6d41\u7a0b\\n1. \u51c6\u5907\u9879\u76ee;\\n2. npm\u6ce8\u518c;\\n3. \u672c\u5730npm\u767b\u5f55;\\n3. \u53d1\u5e03.\\n\\n## \u51c6\u5907\u9879\u76ee\\n\u51c6\u5907\u597d\u4f60\u60f3\u8981\u53d1\u5e03\u5230npm\u7684\u9879\u76ee\\n\u65b0\u9879\u76ee\u8bf7\u6267\u884c `npm init`\u3002\u793a\u4f8b\u5982\u56fe\uff1a\\n![](/images/npm/npm-index.png)\\n\\n\u51c6\u5907\u597d\u9879\u76ee\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u8fdb\u884c\u767b\u5f55\u53d1\u5e03\u4e86\u3002\\n\\n## npm\u6ce8\u518c\\n\u5728npm\u5b98\u7f51\u4e0a\u6ce8\u518c\u4e00\u4e2a\u8d26\u53f7\uff0c\u6211\u4eec\u5c06\u4ee5\u6b64\u5e10\u53f7\u7684\u540d\u4e49\u6765\u53d1\u5e03npm\u5305\u3002[\u524d\u5f80\u6ce8\u518c](https://www.npmjs.com/signup)\\n\\n## \u672c\u5730npm\u767b\u5f55\\n\u5728\u672c\u5730\u7ec8\u7aef\u6267\u884c:\\n```\\nnpm addUser\\n```\\n\u6267\u884c\u8be5\u547d\u4ee4\u540e\uff0c\u4f9d\u6b21\u8f93\u5165\u7528\u6237\u540d\u3001\u5bc6\u7801\u3001\u90ae\u7bb1\u7b49\u4fe1\u606f\u3002\u5982\u56fe\u6240\u793a\uff1a\\n![](/images/npm/npm-login.png)\\n\\n\u4ee5\u4e0a\uff0c\u767b\u5f55\u5b8c\u6210\u3002\\n\\n## \u53d1\u5e03\\n\u6267\u884c\u53d1\u5e03\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a\\n```\\nnpm publish\\n```\\n\\n\u53d1\u5e03\u7684npm package \u4f1a\u81ea\u52a8\u4f7f\u7528 `package.json` \u4e2d\u7684 ***version***\u4f5c\u4e3a\u7248\u672c\u53f7\u3002\\n\\n## \u9047\u5230\u7684\u95ee\u9898\\n1. package name\u5982\u679c\u5df2\u5b58\u5728\uff0c\u53d1\u5e03\u65f6\u4f1a\u51fa\u73b0\u6743\u9650\u9519\u8bef\uff0c\u5bfc\u81f4\u53d1\u5e03\u5931\u8d25\uff0c\u6539\u540d\u5373\u53ef\u3002\u9519\u8bef\u4fe1\u606f\u5982\u4e0b\uff1a\\n```\\n\u25b6 npm publish\\nnpm ERR! publish Failed PUT 403\\nnpm ERR! code E403\\nnpm ERR! You do not have permission to publish \\"npm-package-test\\". Are you logged in as the correct user? : npm-package-test\\n\\nnpm ERR! A complete log of this run can be found in:\\nnpm ERR!     /Users/pyang/.npm/_logs/2017-12-07T05_28_57_277Z-debug.log\\n```\\n\\n## \u7ed3\u8bed\\n`npm publish`\u6709\u4e2a ***prepublish*** \u94a9\u5b50\uff0c\u53ef\u4ee5\u81ea\u52a8\u6267\u884c\u76f8\u5173\u811a\u672c\u3002\u5728`package.json`\u7684 ***scripts*** \u4e2d\u6dfb\u52a0\u4e00\u6761 ***prepublish*** \u7684\u811a\u672c\u5373\u53ef\u3002\\n\\n\u6574\u7406\u4e00\u4e0b\u5957\u8def\uff0c\u64cd\u4f5c\u5c31\u6e05\u695a\u591a\u4e86\u3002\u8fd8\u662f\u591a\u5c1d\u8bd5\u5427\uff01"},{"id":"/momentjs-query","metadata":{"permalink":"/blog/momentjs-query","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/momentjs-query.md","source":"@site/blog/momentjs-query.md","title":"\u5c0f\u8bd5 Momentjs Query API","description":"moment\u7528\u7684\u597d\uff0c\u53ef\u7701\u4e00\u5927\u7b14\u7cbe\u529b\u548c\u65f6\u95f4\u3002","date":"2017-11-28T00:33:55.000Z","formattedDate":"2017\u5e7411\u670828\u65e5","tags":[{"label":"moment","permalink":"/blog/tags/moment"}],"readingTime":1.135,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u5c0f\u8bd5 Momentjs Query API","date":"2017-11-28T00:33:55.000Z","updated":null,"tags":["moment"]},"prevItem":{"title":"npm\u5305\u53d1\u5e03\u5b9e\u8df5","permalink":"/blog/npm-package"},"nextItem":{"title":"webpack \u914d\u7f6e react \u5f00\u53d1\u73af\u5883","permalink":"/blog/webpack"}},"content":"moment\u7528\u7684\u597d\uff0c\u53ef\u7701\u4e00\u5927\u7b14\u7cbe\u529b\u548c\u65f6\u95f4\u3002\\n\\n\x3c!--truncate--\x3e\\n## \u8d77\u59cb\u4e0e\u7ed3\u675f\\n1. \u5468\u671f\u7684\u5f00\u59cb\u65f6\u95f4\\n\\n```\\nmoment().startOf(String)\\n```\\n\\n2. \u5468\u671f\u7684\u7ed3\u675f\u65f6\u95f4\\n\\n```\\nmoment().endOf(String)\\n```\\n\\n* String \u652f\u6301\u4ee5\u4e0b\u53c2\u6570\uff1a\\n  - year\\n  - month\\n  - quarter\\n  - week\\n  - isoWeek\\n  - day\\n  - date\\n  - hour\\n  - minute\\n  - second\\n\\n\u793a\u4f8b\u5982\u4e0b\uff1a\\n\\n```\\nmoment().startOf(\'month\');\\nmoment().startOf(\'year\');\\nmoment().startOf(\'week\');\\n```\\n\\n\\n## Boolean \u5224\u65ad\\n\u5224\u65ad\u65f6\u95f4A\u662f\u5426\u5728\u76ee\u6807\u65f6\u95f4B\u4e4b\u524d\u6216\u4e4b\u540e, \u5982\uff1a\\n```\\n/*\\n  A\uff0fB \u7c7b\u578b\u652f\u6301 Moment|String|Number|Date|Array\\n\\n  \u53c2\u6570 String \u53ef\u4ee5\u662f year\uff0fmonth\uff0fweek\uff0fday\uff0fhour\uff0fminute\uff0fsecond,\u53ef\u7701\u7565\\n */\\nmoment(A).isBefore(B, String)\\n```\\n  \u793a\u4f8b\uff1a\\n  ```\\n  const a = moment()\\n  a.isBefore(\'2017-11-27\'); // true\\n  a.isAfter(\'2017-11-27\'); // false\\n  ```\\n\\n\u7c7b\u4f3c\u8fd8\u6709\uff1a\\n1. `isSame`\\n2. `isSameBefore`\\n3. `isSameAfter`\\n4. `isBetween`\\n  ```\\n  moment(\'2010-10-20\').isBetween(\'2010-01-01\', \'2012-01-01\', \'year\'); // false\\n  ```\\n\\n5. `isDST`\\nchecks if the current moment is in daylight saving time.\\n\\n  ```\\n  moment([2011, 2, 12]).isDST(); // false, March 12 2011 is not DST\\n  ```\\n\\n6. `isDSTShifted`\\n7. `isMoment`\\n8. `isLeapYear`\\n9. `isDate`\\n\\n## \u5176\u4ed6\\n### \u65f6\u95f4\u6233\\n```\\nmoment().valueOf(); // \u6beb\u79d2\u6570\\nmoment().unix(); // \u79d2\u6570\\n```\\n\\n## \u540e\u8bb0\\n\u5b98\u65b9\u6587\u6863\u793a\u4f8b\u548c\u63cf\u8ff0\u6e05\u6670\u660e\u4e86\uff0c\u53ef\u70b9\u51fb[\u67e5\u770b\u5b98\u65b9\u6587\u6863](http://momentjs.com/docs/#/parsing/)\uff0c\u4e0d\u591a\u8d58\u8ff0\u3002"},{"id":"/webpack","metadata":{"permalink":"/blog/webpack","editUrl":"https://github.com/p2yang/p2yang.github.io/blob/main/blog/webpack.md","source":"@site/blog/webpack.md","title":"webpack \u914d\u7f6e react \u5f00\u53d1\u73af\u5883","description":"webpack \u914d\u7f6e\u9519\u7efc\u590d\u6742\uff0c\u6bcf\u6b21\u72ec\u7acb\u914d\u7f6e\u4e5f\u4f1a\u8ba9\u6211\u7684\u5fc3\u60c5\u8ddf\u7740\u590d\u6742\u8d77\u6765\u3002\u800c\u4eca\u518d\u4e5f\u53d7\u4e0d\u4e86\uff0c\u62ff\u6765\u5373\u7528\u53ef\u4ee5\uff0c\u62ff\u6765\u53d7\u7f6a\u53ef\u4e0d\u884c\u3002\u4fbf\u5728\u8fd9\u91cc\u8bb0\u5f55\u4e00\u4e0b\u7528 webpack \u914d\u7f6e react \u5f00\u53d1\u7684\u95ee\u9898\u548c\u5b9e\u73b0\u8fc7\u7a0b\u3002","date":"2017-11-23T22:58:22.000Z","formattedDate":"2017\u5e7411\u670823\u65e5","tags":[{"label":"webpack","permalink":"/blog/tags/webpack"}],"readingTime":3.655,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"webpack \u914d\u7f6e react \u5f00\u53d1\u73af\u5883","date":"2017-11-23T22:58:22.000Z","tags":["webpack"]},"prevItem":{"title":"\u5c0f\u8bd5 Momentjs Query API","permalink":"/blog/momentjs-query"}},"content":"webpack \u914d\u7f6e\u9519\u7efc\u590d\u6742\uff0c\u6bcf\u6b21\u72ec\u7acb\u914d\u7f6e\u4e5f\u4f1a\u8ba9\u6211\u7684\u5fc3\u60c5\u8ddf\u7740\u590d\u6742\u8d77\u6765\u3002\u800c\u4eca\u518d\u4e5f\u53d7\u4e0d\u4e86\uff0c\u62ff\u6765\u5373\u7528\u53ef\u4ee5\uff0c\u62ff\u6765\u53d7\u7f6a\u53ef\u4e0d\u884c\u3002\u4fbf\u5728\u8fd9\u91cc\u8bb0\u5f55\u4e00\u4e0b\u7528 webpack \u914d\u7f6e react \u5f00\u53d1\u7684\u95ee\u9898\u548c\u5b9e\u73b0\u8fc7\u7a0b\u3002\\n\\n\x3c!--more--\x3e\\n### \u9884\u70ed\\nreact app \u6709\u73b0\u6210\u7684 build \u5de5\u5177, \u53ef\u4ee5\u5feb\u901f\u751f\u6210\u9879\u76ee\u914d\u7f6e\uff0c\u5b98\u65b9\u63a8\u8350 [create-react-app](https://github.com/facebookincubator/create-react-app)\u3002\u5982\u679c\u4f60\u4e0d\u60f3\u5728\u914d\u7f6e\u4e0a\u6b7b\u78d5\uff0c\u53ef\u4ee5\u53bb\u7814\u7a76\u7814\u7a76\u5982\u4f55\u4f7f\u7528\u8fd9\u4e2a\u5de5\u5177\uff0c\u66f4\u4e13\u6ce8\u5730\u4e66\u5199\u4e1a\u52a1\u4ee3\u7801\u3002\\n\\n\u672c\u6587\u53c2\u8003 [react\u5b98\u65b9\u6587\u6863](https://facebook.github.io/react/docs/hello-world.html) \u548c [webpack\u5b98\u65b9\u6587\u6863](https://webpack.js.org/guides/)\uff0c\u7ed3\u5408\u5404\u8def bug \u89e3\u51b3\u65b9\u6848\u800c\u5199\uff0c\u6709\u6240\u758f\u6f0f\u8fd8\u8bf7\u81ea\u884c\u4f53\u4f1a\u548c\u4ea4\u6d41\u3002\\n\\n### \u521d\u59cb\u5316\\n   \uff5e\uff5e\uff5e\\n\\n1. \u521d\u59cb\u5316 **package.json**\\n\\n  \u8fd9\u91cc\u4f7f\u7528 **yarn** \u4ee3\u66ff **npm** \u6765\u914d\u7f6e\u548c\u5b89\u88c5\u5404\u8def\u63d2\u4ef6\u5305\uff0c\u4f7f\u7528\u65b9\u6cd5\u57fa\u672c\u7c7b\u4f3c\uff08[\u67e5\u770b\u5b98\u65b9\u4e2d\u6587\u6587\u6863](https://yarnpkg.com/zh-Hans/docs)\uff09\u3002\\n\\n  ```bash\\n  yarn init\\n  ```\\n  \u4e00\u8def\u9ed8\u8ba4\u5373\u53ef\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5df1\u586b\u5165\u4f60\u60f3\u8981\u7684\u4fe1\u606f\uff0c\u540e\u6094\u4e86\u4e5f\u80fd\u4fee\u6539\u3002\\n\\n2. \u5b89\u88c5 **webpack**\\n\\n  \u5b89\u88c5\u5f00\u53d1\u4f9d\u8d56: webpack\\n  ```bash\\n  yarn add webpack --dev\\n  ```\\n\\n3. \u914d\u7f6e webpack \u542f\u52a8\u6587\u4ef6 *webpack.config.js*\\n\\n  ```js\\n  const webpack = require(\'webpack\')\\n\\n  const config = {\\n    entry: \'./src/index.js\',\\n    output: {\\n      filename: \'bundle.js\',\\n      path: \'./dist\'\\n    }\\n  }\\n\\n  module.exports = config\\n  ```\\n\\n4. \u5b89\u88c5 *babel-loader*\\n\\n  webpack \u4f1a\u5c06\u6e90\u6587\u4ef6\u6253\u5305\u8f93\u51fa\u5230\u6307\u5b9a\u6587\u4ef6\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u914d\u7f6e\u5165\u53e3\u548c\u51fa\u53e3\u6587\u4ef6\u3002\u53e6\u5916\uff0c\u9488\u5bf9\u7279\u5b9a\u7c7b\u578b\u7684\u6587\u4ef6\uff0cwebpack \u9700\u8981\u9760\u5bf9\u5e94\u7684 *loader* \u6765\u5904\u7406\u5b83\u4eec\u3002\u7531\u4e8e\u672c\u7bc7\u8bb2\u7684\u662f `react`\uff0c\u6240\u4ee5\u8fd9\u91cc\u9700\u8981\u52a0\u5165 [babel-loader](https://github.com/babel/babel-loader)\\n\\n  \u5b89\u88c5\u8be5 loader \u8fd8\u9700\u5b89\u88c5\u4f9d\u8d56 *babel-core* \u3001 *babel-preset-env* \u3002\\n  ```bash\\n  yarn add babel-loader babel-core babel-preset-env --dev\\n  ```\\n\\n  \u7136\u540e\uff0c\u5728 *webpack.config.js* \u4e2d config \u6dfb\u52a0\u914d\u7f6e\uff1a\\n  ```js\\n  module: {\\n    rules: [\\n      {\\n        test: /\\\\.js$/,\\n        exclude: /(node_modules|bower_components)/,\\n        use: {\\n          loader: \'babel-loader\'\\n        }\\n      }\\n    ]\\n  }\\n  ```\\n\\n  \u8981\u987a\u5229\u542f\u7528 babel \u9700\u8981\u6dfb\u52a0\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\uff0c\u544a\u8bc9\u5979\u8be5\u5982\u4f55\u6267\u884c\u3002\u6211\u4eec\u5728\u6839\u76ee\u5f55\u4e0b\u6dfb\u52a0 *.babelrc* \u6587\u4ef6\\n  ```js\\n  // .babelrc\\n  {\\n    \\"presets\\": [\\n      \\"env\\",\\n      \\"react\\",\\n      \\"es2015\\"\\n    ]\\n  }\\n  ```\\n\\n5. \u5b89\u88c5 *react*\\n\\n  \u5b89\u88c5 react \u548c react-dom\\n\\n  ```bash\\n  yarn add react react-dom\\n  ```\\n\\n6. \u5199\u5165 react \u5185\u5bb9\\n\\n  ```js\\n  import React from \'react\'\\n  import ReactDOM from \'react-dom\'\\n\\n  ReactDOM.render(\\n    <h1>Hello, world!</h1>,\\n    document.getElementById(\'root\')\\n  )\\n  ```\\n\\n7. \u914d\u7f6e html \u6a21\u677f\\n\\n  webpack \u4f1a\u5bfc\u51fa\u4e00\u4e2a js \u6587\u4ef6\uff0c\u82e5\u60f3\u5728\u524d\u7aef\u9875\u9762\u4e2d\u6267\u884c\uff0c\u9700\u8981\u4e00\u4e2a html \u6587\u4ef6\u6765\u5f15\u5165\u3002\\n  \u6211\u4eec\u5728\u6839\u76ee\u5f55\u4e0b\u65b0\u5efa\u6587\u4ef6\u5939 *public* \uff0c\u7528\u4e8e\u5b58\u653e\u516c\u5171\u7684\u9759\u6001\u8d44\u6e90\u3002\u7136\u540e\u5728\u5176\u4e2d\u65b0\u5efa\u6587\u4ef6 *index.html* \uff0c\u6dfb\u52a0 root \u5143\u7d20\uff1a\\n  ```html\\n  <div id=\'root\'></div>\\n  ```\\n\\n  \u8fd9\u91cc\u4e0d\u7528\u624b\u5199script\u6807\u7b7e\u6765\u5f15\u5165js\uff0c\u800c\u7528 webpack \u63d2\u4ef6\u6765\u914d\u7f6e\u548c\u5f15\u5165\u3002\u9996\u5148\u5b89\u88c5 `html-webpack-plugin`\uff0c\\n\\n  ```bash\\n  yarn add html-webpack-plugin --dev\\n  ```\\n\\n  \u7136\u540e\uff0c\u5728 *webpack.config.js* \u4e2d\u6dfb\u52a0 config \u914d\u7f6e\uff1a\\n\\n  ```js\\n  ...\\n  const HtmlWebpackPlugin = require(\'html-webpack-plugin\')\\n\\n  ...\\n  plugins: [\\n    new HtmlWebpackPlugin({\\n      template: \'./public/index.html\'\\n    })\\n  ],\\n  ```\\n  \u4e0a\u9762\uff0c\u6211\u4eec\u5728 *template* \u4e2d\u6307\u5b9a index.html \u8def\u5f84\u3002\\n\\n8. \u6dfb\u52a0\u542f\u52a8\u811a\u672c\\n\\n  \u5728 *package.json* \u4e2d\u6dfb\u52a0 `scripts`\\n  ```js\\n  \\"scripts\\": {\\n    \\"build\\": \\"webpack\\"\\n  }\\n  ```\\n  \u7136\u540e\uff0c\u6267\u884c\u547d\u4ee4\uff1a\\n  ```bash\\n  yarn run build\\n  ```\\n  \u6267\u884c\u6210\u529f\u540e\uff0c\u6839\u76ee\u5f55\u4e0b\u4f1a\u751f\u6210 dist \u6587\u4ef6\u5939\uff0c\u8fd9\u5c31\u662f\u6211\u4eec\u6240\u9700\u8981\u7684\u6587\u4ef6\u4e86\u3002\\n\\n  \x3c!-- \u6b64\u65f6\uff0c\u9879\u76ee\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\uff1a\\n  ![webpack_react_config.png](./webpack_react_config.png) --\x3e"}]}')}}]);